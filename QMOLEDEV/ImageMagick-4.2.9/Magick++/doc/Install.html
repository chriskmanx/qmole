<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.61 [en] (X11; U; SunOS 5.6 sun4u) [Netscape]">
   <meta name="Author" content="Bob Friesenhahn">
   <meta name="Description" content="C++ API for ImageMagick">
   <title>Installing Magick++</title>
</head>
<body text="#000000" bgcolor="#FFFFFF" link="#0000EE" vlink="#551A8B" alink="#FF0000">
&nbsp;
<center>
<h1>
Installing Magick++</h1></center>

<h3>
General</h3>
In order to compile Magick++ you must have access to a standard C++ implementation
and have <a href="http://www.wizards.dupont.com/cristy/ImageMagick.html">ImageMagick</a>
installed (<a href="ftp://ftp.wizards.dupont.com/pub/ImageMagick/">ftp://ftp.wizards.dupont.com/pub/ImageMagick/</a>).
Magick++ is co-packaged as a subdirectory of ImageMagick as of ImageMagick
version 4.2.2 and later. The author uses the <a href="http://egcs.cygnus.com/">egcs
1.1.2 version of GNU C++</a> which is available under UNIX and under the
<a href="http://sourceware.cygnus.com/cygwin/">Cygwin
UNIX-emulation environment</a> for Windows. Standards compliant commercial
C++ compilers should also work fine. Most modern C++ compilers for PCs
should also work (project files are provided for Microsoft Visual C++ 6.0).
<p>The compiler must support the following recent C++ standard features:
<ul>
<li>
bool type</li>

<li>
string class (<tt>&lt;string></tt>)</li>

<li>
exceptions (<tt>&lt;exception></tt>)</li>

<li>
namespaces</li>

<li>
C++ versions of standard C headers (e.g. <tt>&lt;cstring></tt>)</li>

<li>
Standard Template Library (STL) (e.g. <tt>&lt;list></tt>, <tt>&lt;vector></tt>)</li>
</ul>
I have personally verified that Magick++ compiles and runs using the following
compiler/platform combinations:
<br>&nbsp;
<table BORDER WIDTH="100%" NOSAVE >
<caption><b>Tested Configurations</b></caption>

<tr>
<td>
<center><b>Operating System</b></center>
</td>

<td>
<center><b>Architecture</b></center>
</td>

<td>
<center><b>Compiler</b></center>
</td>
</tr>

<tr>
<td><font size=-1>Solaris 2.6</font></td>

<td><font size=-1>SPARC</font></td>

<td><font size=-1>egcs 1.1.1</font></td>
</tr>

<tr>
<td><font size=-1>Solaris 2.6</font></td>

<td><font size=-1>SPARC</font></td>

<td><font size=-1>egcs 1.1.2</font></td>
</tr>

<tr>
<td><font size=-1>Solaris 2.6</font></td>

<td><font size=-1>SPARC</font></td>

<td><font size=-1>gcc-2.95 19990629 (prerelease)</font></td>
</tr>

<tr>
<td><font size=-1>FreeBSD 2.2.7</font></td>

<td><font size=-1>Intel Pentium II</font></td>

<td><font size=-1>egcs 1.1.2</font></td>
</tr>

<tr>
<td><font size=-1>Windows NT 4.0 SP3</font></td>

<td><font size=-1>Intel Pentium II</font></td>

<td><font size=-1>Visual C++ 6.0 Standard Edition</font></td>
</tr>
</table>

<p>User's of Magick++ have reported that the following configurations appear
to work with Magick++:
<br>&nbsp;
<table BORDER WIDTH="100%" NOSAVE >
<caption><b>Other Working Configurations</b></caption>

<tr>
<td>
<center><b>Operating System</b></center>
</td>

<td>
<center><b>Architecture</b></center>
</td>

<td>
<center><b>Compiler</b></center>
</td>

<td><b>Reported By</b></td>
</tr>

<tr>
<td><font size=-1>Red Hat Linux 6.0</font></td>

<td><font size=-1>i386</font></td>

<td><font size=-1>egcs 1.1.2</font></td>

<td><font size=-1>Dr. Alexander Zimmermann &lt;Alexander.Zimmermann@fmi.uni-passau.de></font></td>
</tr>

<tr>
<td><font size=-1>Red Hat Linux 5.2</font></td>

<td><font size=-1>i386</font></td>

<td><font size=-1>egcs 1.1.2 (updated from SRPM)</font></td>

<td><font size=-1>Dr. Alexander Zimmermann &lt;Alexander.Zimmermann@fmi.uni-passau.de></font></td>
</tr>

<tr>
<td><font size=-1>Red Hat Linux 5.2</font></td>

<td><font size=-1>Alpha</font></td>

<td><font size=-1>egcs 1.1.2 (updated from SRPM)</font></td>

<td><font size=-1>Dr. Alexander Zimmermann &lt;Alexander.Zimmermann@fmi.uni-passau.de></font></td>
</tr>

<tr>
<td><font size=-1>SGI IRIX</font></td>

<td><font size=-1>MIPS</font></td>

<td><font size=-1>IRIX C++ 7.2.1.2m</font></td>

<td><font size=-1>Albert Chin-A-Young &lt;china@thewrittenword.com></font></td>
</tr>

<tr>
<td><font size=-1>SGI IRIX</font></td>

<td><font size=-1>MIPS</font></td>

<td><font size=-1>IRIX C++ 7.2.1.3m</font></td>

<td><font size=-1>Albert Chin-A-Young &lt;china@thewrittenword.com></font></td>
</tr>
</table>

<p>Please let me know if you have successfully built and executed Magick++
using a different configuration so that I can add to the table of verified
configurations.
<h3>

<hr WIDTH="100%"></h3>

<center>
<h3>
UNIX/Linux</h3></center>

<h4>
Building From Source</h4>
To install the package under Unix, installation should be similar to
<p><tt>./configure [ --prefix=/prefix ]</tt>
<br><tt>make</tt>
<br><tt>make install</tt>
<p>The configure script uses the compiler/linker flags it obtains from
the installed 'Magick-config' script when performing the build. This means
that ImageMagick must be installed <b>before</b> Magick++ is configured.
The library is currently named similar to 'libMagick++.a' and is installed
under prefix/lib while the headers are installed with Magick++.h being
installed in prefix/include and the remaining headers in prefix/include/Magick++.
<p>While it is currently possible to select building a shared Magick++
library (using the configure option --enable-shared), the resulting library
may not be fully functional (exceptions fail to work) because libtool does
not yet properly initialize static constructors when creating C++ shared
libraries on most systems. A known workaround when using GNU C++ is to
cd into the 'lib' subdirectory and execute an incantation similar to "c++
-shared -o .libs/libMagick++.so.0.0.0 *.lo -L/usr/local/lib -L/usr/openwin/lib
-lMagick -ljbig -ldf -ltiff -lttf -ljpeg -lpng -ldpstk -ldps -lXext -lXt
-lX11 -lsocket -lnsl -lbz2 -lz -lm -lc". The exact incantation to use is
derived from the one that libtool itself used. Obviously this is not for
the faint of heart. If you plan to write many programs with Magick++, this
effort may be worth it since it makes the executables much smaller.
<p>To influence the options the configure script chooses, you may specify
environment variables when running the script. For example, the command
<br>&nbsp;
<blockquote><tt>CXX=CC CXXFLAGS=-O2 LIBS=-lposix ./configure</tt></blockquote>

<p><br>specifies additional options to the configure script.&nbsp; The
following table shows the available options.
<br>&nbsp;
<table BORDER WIDTH="90%" NOSAVE >
<caption>
<center>Environment Variables That Effect Configure</center>
</caption>

<tr>
<td>
<center><b>Environment Variable</b></center>
</td>

<td>
<center><b>Description</b></center>
</td>
</tr>

<tr NOSAVE>
<td>
<center>CXX</center>
</td>

<td NOSAVE>Name of C++ compiler (e.g. 'CC -Xa') to use compiler 'CC -Xa'</td>
</tr>

<tr>
<td>
<center>CXXFLAGS</center>
</td>

<td>Compiler flags (e.g. '-g -O2') to compile with</td>
</tr>

<tr>
<td>
<center>CPPFLAGS</center>
</td>

<td>Include paths (-I/somedir) to look for header files</td>
</tr>

<tr>
<td>
<center>LDFLAGS</center>
</td>

<td>Library paths (-L/somedir) to look for libraries. Systems that support
the notion of a library run-path may additionally require -R/somedir or
'-rpath /somedir' in order to find shared libraries at run time.</td>
</tr>

<tr>
<td>
<center>LIBS</center>
</td>

<td>Extra libraries (-lsomelib) required to link</td>
</tr>
</table>

<h4>
Installing Linux RPMs</h4>
<a href="mailto:Alexander.Zimmermann@FMI.Uni-Passau.De">Dr. Alexander Zimmermann</a>
maintains Linux RPMs of ImageMagick and Magick++. These may be downloaded
from <a href="ftp://ftp.forwiss.uni-passau.de/pub/linux/local/ImageMagick/">ftp://ftp.forwiss.uni-passau.de/pub/linux/local/ImageMagick/</a>.
This site is&nbsp; mirrored periodically to the <a href="ftp://ftp.wizards.dupont.com/pub/ImageMagick/linux/">ImageMagick
linux directory</a> and from there to the many ImageMagick and Linux mirror
sites. Please note that the default version of the C++ compiler delivered
with the system may not be sufficient to support Magick++. Egcs 1.1.2 is
strongly recommended under Linux.
<br>
<hr WIDTH="100%">
<center>
<h3>
Windows '9X, and Windows NT</h3></center>

<h4>
Visual C++</h4>
To build using Visual C++, extract the contents of <i>Magick++-version.zip</i>
(preserving sub-directories) in the ImageMagick distribution directory.
This will create the directory <i>Magick++-version</i> containing the sub-directories
'demo', 'doc', 'lib', and 'tests'. Open the workspace file <i>Magick++.dsw</i>
and build the project Magick++ in order to build the library. The library
is output to the same directory as the ImageMagick libraries.
<br>The available projects are:
<blockquote>Magick++
<br>&nbsp;&nbsp;&nbsp; the Magick++ library
<br>attributes
<br>&nbsp;&nbsp;&nbsp; test setting image attributes
<br>manipulate
<br>&nbsp;&nbsp;&nbsp; test manipulating images
<br>button
<br>&nbsp;&nbsp;&nbsp; program to create a simple rectangular button with
an annotation
<br>flip
<br>&nbsp;&nbsp;&nbsp; program to invert and morph images in an existing
GIF animation.
<br>demo
<br>&nbsp;&nbsp;&nbsp; program to demonstrate the image manipulation primitives
<br>shapes
<br>&nbsp;&nbsp;&nbsp; program to demonstrate use of the drawing primitives</blockquote>
Test and demonstration programs are built in the directory which contains
their sources. The Magick++ library is placed in the ImageMagick/lib directory
alongside the ImageMagick library.
<h4>
Cygwin &amp; EGCS</h4>
It is possible to build both ImageMagick and Magick++ under the Cygwin
Unix-emulation environment for Windows NT. Obtain and install Cgywin from
<a href="http://sourceware.cygnus.com/cygwin/">http://sourceware.cygnus.com/cygwin/</a>
and update to the latest EGCS compiler from <a href="http://www.xraylith.wisc.edu/~khan/software/gnu-win32/egcs.html">http://www.xraylith.wisc.edu/~khan/software/gnu-win32/egcs.html</a>.&nbsp;&nbsp;
X11R6.4 libraries are available from <a href="http://dao.gsfc.nasa.gov/software/grads/win32/X11R6.4/">http://dao.gsfc.nasa.gov/software/grads/win32/X11R6.4/</a>.&nbsp;
To build using Cygwin and EGCS, follow the instructions for building under
Unix. ImageMagick and Magick++ do not yet include support for building
Windows DLLs under Cygwin so do not enable dynamic libraries when building
ImageMagick.
</body>
</html>
