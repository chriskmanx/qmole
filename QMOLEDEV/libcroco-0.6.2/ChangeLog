============= 0.6.2 release =======================

2009-02-04  Thomas Wood  <thos@gnome.org>

	* NEWS
	* configure.in

	Update for 0.6.2 release

2008-09-26  Robert Staudinger  <robsta@gnome.org>

	reviewed by: Dom Lachowicz <domlachowicz@gmail.com>

	* src/cr-doc-handler.c (cr_doc_handler_new): Bug 553937 - CRDocHandler instances created with reference count of 0

2008-03-30  Peter Moulder  <pjmoulder@svn.gnome.org>

	* ChangeLog: Change to UTF-8.  I believe this now the preferred
	  charset for Gnome ChangeLogs.  (Let me know if gratuitous use of
	  unicode, such as in the following paragraph, causes a problem for
	  you.  Would a vim/emacsen mode line at the bottom of the file help?)

	* src/*: Add ‘const’ to various function prototypes, as discussed at
	  http://www.mail-archive.com/libcroco-list@gnome.org/msg00049.html .
	  This change is a noop in the sense that it has no effect on
	  libcroco's object files, but does affect source-level compatibility,
	  both forwards and backwards — though in practice I'd guess that no
	  existing code will break from this.

	* src/cr-declaration.c: (cr_declaration_new): Doc.
	* (cr_declaration_destroy): Simplify implementation (and assert that
	  next/prev elements point to each other before following the links).

2007-01-10  Bruno Haible  <bruno@clisp.org>

	* cr-style.h (enum CRPositionType): Remove trailing comma. Needed for
	compilation on AIX with xlc.
	* cr-fonts.c (cr_font_weight_get_bolder): Handle FONT_WEIGHT_INHERIT.
	* cr-sel-eng.c: Bug 395099 - overly agressive rule matching
	
2007-01-09  Benjamin Dauvergne <feanor@tol-eressea.org>

	* src/cr-tknzr.c: Bug 314831 - Escapes not recognized
	
2007-01-09  Dom Lachowicz <domlachowicz@gmail.com>

	* src/cr-sel-eng.c: a bug in the class selector code, where it would not require whitespace before the class in a class attribute with multiple classes.
	
2007-01-09  Dom Lachowicz <domlachowicz@gmail.com>

        From Bruno Haible <bruno@clisp.org>
	
	* src/cr-fonts.h: gives syntax errors when included twice
	* src/cr-fonts.c: the return value of cr_font_family_prepend()
	should be "the font family list", not CR_OK which is the same as NULL.
	* src/cr-fonts.c: the logic of cr_font_weight_get_bolder
	does not take into account the FONT_WEIGHT_INHERIT value, and the
	shift by 1 can yield out-of-range values. Partial fix
	
2007-01-09  Benjamin Dauvergne <feanor@tol-eressea.org>

	* src/cr-tknzr.c: Bug 372011 - comments not parsed correctly
	* src/cr-tknzr.c: Bug 394680 - problem parsing function name starting with 'u' or 'r'
	* src/cr-parser.c: Bug 139878 - keep end of ruleset parsing location, and give it to the end_selector sac-handler.
	* src/cr-tknzr.c: Bug 394294 - Escape are wrongly computed
	
2007-01-09  Dom Lachowicz <domlachowicz@gmail.com>

	* src/cr-tknzr.c: Bug 336621 - cr_tknzr_get_next_token wasn't 
	handling "<!--" correctly

2006-11-30  Dom Lachowicz <domlachowicz@gmail.com>

	* src/cr-num.c: Bug 381040 - floating numbers always output to exactly 3 digits after decimal points.
	Also fixed a related bug where libcroco wouldn't emit compliant CSS strings if run in a non-C locale.
	
2006-11-29  Dom Lachowicz <domlachowicz@gmail.com>

	* src/cr-token.c: Bug 380438 - Leak and trace message in cr_token_clear.
	Fix suggested by Mark Rogers <mark.rogers at electrum.co.uk>
	
2006-11-14  Dom Lachowicz <domlachowicz@gmail.com>

	* src/cr-rgb.c: Bug 375194 - fix to builtin color processing
	
2006-05-02  Peter Moulder <pmoulder at mail.csse.monash.edu.au>
	
	* src/*.[ch]: Bug 340298 - Fixes to documentation markup.

2006-05-02  Dom Lachowicz <cinamod@hotmail.com>

	* src/Makefile.am: Fix linking by adding proper dependencies (bug 148790)
	Cygwin build fixes
	* configure.in: Detect Cygwin in addition to Mingw (bug 333834)
	* csslint/csslint.c: Fix 3 "dereferencing type-punned pointer will break strict-aliasing rules" warnings
	
2006-04-29  Dom Lachowicz <cinamod@hotmail.com>

	* src/cr-tknzr.c: Revert my previous change and instead use Inkscape's
	patch in bug #306823, as it improves precision
	* src/cr-utils.[ch]: Ditto

	============= 0.6.1 release =======================

dim mar  5 23:32:14 CET 2006 Dodji Seketeli

	* configure.in,docs/Makefile.am: 
	  unwire gtk-doc temporarily. Couldn't make it
	  distcheck otherwise.
	* tests/Makefile.am: add global-vars.sh.in to EXTRA_DIST files.
	* confifure.in: increase library REVISION number, for 0.6.1 release.

2006-03-01  Dom Lachowicz <cinamod@hotmail.com>

	* src/cr-tknzr.c: Parse fractional parts of numbers properly (bug 333057)
	* src/cr-utils.[ch]: Ditto
	* configure.in: bump version to so that librsvg can depend on its fixes
	
2005-11-16  Tor Lillqvist  <tml@novell.com>

	* libcroco-zip.in: New file. libcroco-zip is used to build a
	libcroco distribution for Win32.

	* Makefile.am: Distribute libcroco-zip.in

	* configure.in: AC_SUBST also LIBCROCO_CURRENT and LIBCROCO_AGE as
	libcroco-zip needs them to construct the DLL name. Check for
	Win32, set OS_WIN32 Automake conditional. Expand libcroco-zip.

	* src/Makefile.am: Use -no-undefined on Win32. Link libcroco with
	GLIB2_LIBS and LIBXML2_LIBS.

Thu May  5 19:15:27 CEST 2005 Dodji Seketeli <dodji@gnome.org>

	* src/cr-string.h, cr-parser.c: applied a patch from Peter Moulder
	to fix a typo in cr-parser.c and add G_BEGIN_DECLS/G_END_DECLS to
	cr-string.h

Thu May  5 18:47:10 CEST 2005 Dodji Seketeli <dodji@gnome.org>

	* docs/reference/tmpl/*.sgml: added these to the archive.
	* docs/reference/libcroco-docs.sgml: added this to the archive.

Thu may  5 18:35:04 CEST 2005 Dodji Seketeli <dodji@gnome.org> 

	* src/*.[ch]: made wak loads of comments change to comply with 
	gtk-doc. Big thanks to Sven Herzberg for the initial work on this
	topic.

2005-04-01  Sven Herzberg  <herzi@gnome-de.org>

	* autogen.sh: require automake 1.7
	* configure.in: added a check for gtk-doc, build
	docs/reference/Makefile
	* docs/Makefile.am: added the reference subdir
	* src/cr-additional-sel.c: migrated the comments to gtk-doc style (sed
	rocks)
	* src/cr-additional-sel.h: moved the class description into the .c
	file 

Sun feb 13 14:10:35 CET 2005 Dodji Seketeli <dodji@gnome.org>

	* src/cr-simple-sel.h, src/cr-statement.h: added better documentation.
	[Peter Moulder]
	
	* tests/Makefile.am: add the $top_builddir/src to the include search patch.
	This is is necessary to support building in a directory different from
	the source directory
	*  tests/test-*.sh:  adapt these files so that 'make test' works even
	when building in a directory different from the source dir
	* tests/testctl: adapt this script to progapate the changes necessary
	to make the 'test' target work in a directory different from the
	source directory
	This entry has been added thanks to the initial 
	work of Peter Moulder. I have
	modified it a bit so that building and testing 
	from a directory different from the source dir actually works.

	* Makefile.am: make sure the 'all' target is a prerequisite of the
	'test' target. This is a patch from [Peter Moulder]

Thu feb 10 22:34:57 CET 2005 Dodji Seketeli <dodji@gnome.org>

	* Makefile.am,test/testctl: applied a patchlet from Peter Moulder
	to clean the test outputs when issuing 'make clean'.
	* autogen.sh: force the thingy to use automake 1.7.2. better
	late than never.

Mon Sep 20 18:10:50 CEST 2004 Dodji Seketeli <dodji@gnome.org>

	* src/cr-om-parser.c:
	(cr_om_parser_parse_paths_into_cascade)	:
	Fixed a nasty memory management bug reported by ArjanV and Daniel
	Veillard.

2004-06-09  Dodji Seketeli  <dodji@gnome.org>

===================== 0.6.0 release ==================================	

	* NEWS: Updated this for 0.6.0

	* configure.in: fixed the pkg-config and croco-0.6-config output.
	* docs/exmaples/*.c: updated the comments.

2004-06-08  Dodji Seketeli  <dodji@gnome.org>

	* tests/global-vars.sh.in,csslint/Makefile.am,Makefile.am,src/Makefile.am:
	Make libcroco be parallel installable.
	That is, make libcroco.so become libcroco-$(major)-$(minor),
	same thing for the usr/include/libcroco dir, the pkgconfig and
	croco-config file. Removed tests/global-vars.sh and generate it
	it from global-vars.sh.in
	Bump version number to 0.5.2
	
2004-05-31  Dodji Seketeli  <dodji@gnome.org>

	* docs/examples/selection-example-1.c:
	(print_properties_real):
	fix some ansi C compilation errors.
	
2004-05-29  Dodji Seketeli  <dodji@gnome.org>

	* tests/test-functional-notation.sh,tests/test-inputs/functional-notation.css,
	tests/test-output-refs/test-functional-notation.out:
	Added regression tests for #143308
	
	* src/cr-parser.c:
	(cr_parser_parse_term): better handling unary operator.
	* src/cr-stylesheet.c : 
	(cr_stylesheet_dump): fprintf (fd, str) ; doesn't behave
	correctly when str contains a '%' char. Do fprintf (fd, "%", str)
	instead ;
	* src/cr-tknzr.c:
	(cr_tknzr_parse_ident):
	Properly roll back the input stream when an error occurs.
	This ChangeLog entry fixes
	http://bugzilla.gnome.org/show_bug.cgi?id=143308.
	
2004-05-01  Dodji Seketeli  <dodji@gnome.org>

	* src/cr-num.c: 
	(cr_num_to_string): don't output, say, 24generic when the number
	is a generic number. Otherwise, this breaks regression tests.

2004-04-30  Dodji Seketeli  <dodji@gnome.org>

	* src/cr-num.c: 
	(cr_num_to_string): added the serialisation numbers of type
	NUM_INHERIT, NUM_AUTO, NUM_GENERIC
	* src/cr-rgb.[ch]: 
	added a "transparent" flag to the CRRgb.
	added "transparent" to gv_standard_colors.
	(cr_rgb_is_set_to_transparen):
	(cr_rgb_set_to_transparent):
	added these fonction to set/get the rgb transparent property.
	(cr_rgb_set_from_rgb): deep copy here.
	(cr_rgb_copy): added this to perform a deep copy.
	* src/cr-style.c: 
	(set_prop_margin_x_from_value): fix a stupid break missing bug.
	(cr_style_set_props_to_initial_values): 
	set the background-color property initial value to "transparent".
	(cr_style_num_prop_val_to_string): fix some formating bugs here.
	
2004-04-28  Dodji Seketeli  <dodji@gnome.org>

	* src/cr-style.c: 
	(set_prop_font_size_from_value):
	fix a buglet in here.
	(cr_style_resolve_inherited_properties):
	When we resolve inheritance, set the *computed value*, not
	the specified value.
	Resolve inheritance for the "font-size" property.

2004-04-27  Dodji Seketeli  <dodji@gnome.org>

	* Makefile.am: fixed a error when launching make test.
	* src/cr-fonts.[ch]: 
	(cr_font_size_get_smaller_predefined_font_size): 
	(cr_font_size_get_larger_predefined_font_size):
	(cr_font_size_is_predefined_absolute_font_size):
	added these new public method.
	tests/test-inputs/parsing-location.css: updated this test output.
	
2004-04-19  Dodji Seketeli  <dodji@gnome.org>

	* csslint/csslint.c: 
	(import_style): make this work with null media list.
	* src/cr-tknzr.c: 
	(cr_tknzr_parse_uri): correctly set the parsing location
	of uris (e.g: url("an-url");). The parsing location
	points the 'u' of the 'url' keyword.
	This is an attempt to fix
	http://bugzilla.gnome.org/show_bug.cgi?id=139881 .

2004-04-18  Dodji Seketeli  <dodji@gnome.org>

	* configure.in: bumped version number 0.6.0 and lib version
	info to 3:0:0

2004-04-17  Dodji Seketeli  <dodji@gnome.org>

	* src/cr-parser.c: 
	(cr_parser_parse_stylesheet):
	Correctly detect @import run parsing errors.
	This fixes http://bugzilla.gnome.org/show_bug.cgi?id=140334 .
	
	* src/cr-parser.c: 
	(cr_parser_parse_simple_selector):
	correctly detect when class additional selector parsing
	fails.
	(cr_parser_parse_simple_sels):
	Make sure a pointer is not null before derefencing it.
	append a simple sel to the list of simple sels only if 
	the simple sel is not NULL.
	This entry fixes http://bugzilla.gnome.org/show_bug.cgi?id=140317
	.	

	* src/cr-statement.[ch]:
	(cr_statement_list_to_string):
	added this to "to_string" a list of statements.
	(cr_statement_media_rule_to_string): dump the 
	*list of statements* contained in the media rule, and
	not only the first one.
	This entry fixes http://bugzilla.gnome.org/show_bug.cgi?id=139891 .
	* tests/*: added the test-several-media.sh regression test.

	* src/cr-om-parser.c: 
	(end_media): set the "current statement" and
	"current media statement" context variable to NULL
	at the end a media statement.
	This fixes http://bugzilla.gnome.org/show_bug.cgi?id=139889 .

2004-04-16  Dodji Seketeli  <dodji@gnome.org>
 
 	* src/cr-num.c:
 	remove the '...' construction. This fixes
 	http://bugzilla.gnome.org/show_bug.cgi?id=138267.

2004-04-16  Dodji Seketeli  <dodji@gnome.org>

	* src/cr-tknzr.c:
	(cr_tknzr_parse_num): make sure to update the
	parsing location of the parsed CRNum.	
	(cr_tknzr_get_next_token):
	record parsing location of number tokens.
	These fix http://bugzilla.gnome.org/show_bug.cgi?id=139878.

2004-04-15  Dodji Seketeli  <dodji@gnome.org>

	* src/cr-font.c: 
	(cr_font_size_copy): reflect the CRFont
	layout change.
	(cr_font_size_set_predefined_absolute_font_size): 
	(cr_font_size_set_relative_font_size):
	(cr_font_size_set_absolute_font_size):
	(cr_font_size_set_to_inherit):
	added these
	methods to set the values of a CRFontSize.
	(cr_font_size_is_set_to_inherit):added this method
	to set the CRFontSize to the inherit value.
	(cr_font_weight_get_bolder): added this method to get
	a bolder font weight than a given one.
	* src/font.h:
	make CRFont instanciate on the stack.
	* src/cr-num.h: cleanup.
	* cr-style.c: 
	(set_prop_font_size_from_value): reflect the changes
	Done in the layout of the CRStyle::font_size field.
	(cr_style_set_props_to_default_values): 
	set font_size specified value to inherit.
	(cr_style_set_props_to_initial_values): 
	set the 'width' prop to 800px. 
	Set the 'font-size' prop to "medium".
	(this is to be applied to
	the root box)
	(cr_style_resolve_inherited_properties):
	Specified value inherit the *computed* value of
	their parent style, not the specified one !
	Started to work on the inheritance resolution
	of the font_size prop.
	(cr_style_to_string): updated this to reflect the
	addition of specified, computed and actual value
	in CRFontSize.
	* src/cr-style.h: 
	created struct _CRFontSizeVal. It has a specified,
	computed and actual value. CRStyle::font_size
	is now of type struct _CRFontSizeVal.

2004-04-11  Dodji Seketeli  <dodji@gnome.org>
  
	* tests/test-output-refs/test-sel-child-class.out:
	added the reference output of the new test-sel-child-class
	regression test.

	
	* tests/test-inputs/sel-child-class.css
	* tests/test-inputs/sel-child-class.xml
	* tests/test-sel-child-class.sh: added these new files.
	* src/cr-rgb.c:
	(cr_rgb_set): set the inherit field to FALSE when we set
	an rgb.
	(cr_rgb_set_to_inherit): added this to flag the instance
	of CRRgb as being set to 'inherit'.
	(cr_rgb_is_set_to_inherit): added this to test if an instance
	of CRRgb is set to 'inherit' or not.
	* src/cr-sel-eng.c: fixed a subtle bug here in the
	way we evaluate the descendant selector. This bug
	is catched by regression test test-sel-child-class.sh.
	* src/cr-style.c: 
	(cr_style_set_props_to_default_values): set the rgb properties
	to inherit.
	(cr_style_resolve_inherited_properties): rgb props that are set
	to 'inherit' must be resolved.

2004-04-10  Dodji Seketeli  <dodji@gnome.org>

	* src/cr-parser.c: 
	(cr_parser_parse_stylesheet): 
	Fixed http://bugzilla.gnome.org/show_bug.cgi?id=139615 .
	* src/cr-sel-eng.[ch]: made some cleanups here.
	* src/cr-style.c: 
	(set_prop_border_width_from_value):
	added this to support the "border-width" property.
	(set_prop_border_style_from_value):
	added this to support the "border-style" property.
	(cr_style_new): modify the signature of this constructor
	to have more control on the properties inheritance process.
	(cr_style_set_props_to_default_values): renamed
	cr_style_set_props_to_defaults for better legibility.
	(cr_style_set_style_from_decl): added the support for
	"border-style" and "border-width" properties.

2004-04-09  Dodji Seketeli  <dodji@gnome.org>

	* src/cr-om-parser.c:
	(import_style): fixed a minor parsing bug.

2004-04-08  Dodji Seketeli  <dodji@gnome.org>

	* this entry is about a patch sent by Benjamin Dauvergne for
	the support of css properties inheritance. (mainly).
	* src/cr-additional-sel.c: replaced g_string_append_prinf(),
	by g_string_append_c() or g_string_append(), when it's relevant.
	* src/cr-declaration.c: port this over the new CRString.
	* src/cr-fonts.c: smallish cosmetic changes.
	* src/cr-fonts.h: added the FONT_FAMILY_INHERIT value to
	enum CRFontFamilyType and FONT_SIZE_INHERIT to
	enum CRPredefinedAbsoluteFontSize.
	* src/cr-num.h: added NUM_INHERIT to enum CRNumType.
	* src/cr-pseudo.c: same g_string_append_printf() removal scheme
	as above.
	* src/cr-rgb.[ch]: I removed the :1 option done on the 
	CRRgb::is_percentage boolean. We will start looking at this
	kind of optimization when the whole stuff works and after proper
	profiling.
	(cr_rgb_set_from_term): I made a small fix here:
	write !strcmp() and not strcmp() otherwise color setting
	won't work.
	* src/cr-selector.c, src/cr-simple-sel.c, src/cr-statement.c: 
	g_string_append_printf() removal.
	* src/cr-style.c: a lot of cleanup in the inheritance resolution
	handling.
	(cr_style_set_props_to_default): added this new method to set
	the style of the root element node.
	(cr_style_resolve_inheritance): (this function was initially named
	cr_style_propagate_from_parent() by Benjamin, but I renamed 
	it to enhance code legibility at least for people who know the
	css spec.
	Renamed the CRStyle::relative boolean member by a
	CRStyle::inherited_props_resolved boolean to enhance code legibility.

2004-04-03  Dodji Seketeli  <dodji@gnome.org>

	* src/libcroco-config.h: removed this from archive.

	* src/cr-sel-eng.c: 
	(class_add_sel_matches_node): make this correctly handle
	class list especially when it's the last element that is
	to be selected.
	(attr_add_sel_matches_nod):
	  * in [attr=val] attr selector,
	  make sure [attr=val] doesn't get selected when only
	[attr=value] should, for instance. 
	  * fix [att~=foo bar] making sure that bar 
	  can also be selected.
	  * fix [att|=en-US] making sure that the last element
	  of the dash separated list of elements can also be
	  selected.
	(additional_selector_matches_node): 
	add support for linked additional selectors 
	e.g: [attr=sel][attr=foo].
	(sel_matches_node_real):
	Even a selector of type UNVIVERSAL_SELECTOR can have
	additional selectors. This was a long standing bug.

2004-04-01  Dodji Seketeli  <dodji@gnome.org>

	* csslint/csslint.c: much more work on the --dump-location option.
	This can be tested by users now.
	* src/cr-parser.c: 
	(cr_parser_parse_atrule_core): fixed a parsing bug here.
	(cr_parser_parse_any_core): COMMENT_TK is part of an ANY production.
	(cr_parser_parse_stylesheet): @charset not located at (1,1) should not
	make the parser ignore the next statement.
	(cr_parser_parse_page): better parsing of @page statement.
	* cr-tknzr.c:
	(cr_tknzr_parse_uri): fix parsing location gathering for uris.
	* src/cr-token.c: added a TODO notice here.

	
2004-03-29  Dodji Seketeli  <dodji@gnome.org>

	* csslint/csslint.c: started to add the --dump-location option.
	It dumps the parsing location information for selectors and 
	property declarations. I still need to do the same for
	the other css constructions. Also cleaned up csslint a bit.
	* src/cr-additional-sel.[ch]: 
	(cr_additional_sel_one_to_string): added this new method to to_string
	only one additional selector.
	* src/cr-input.c: initialise the line/col to 1 at the origin.
	* src/cr-parser.c: 
	(cr_parser_parse_simple_selector): collect parsing location
	for the additional attribute selector.
	* src/cr-parsing-location.[ch]:
	(cr_parsing_location_to_string): added this method to
	serialise the CRParsingLocation class.
	(cr_parsing_location_dump) : added this new method.
	* src/cr-simple-sel.c:
	(cr_simple_sel_one_to_string): added this method to serialise
	only one simple selector.
	* src/cr-string.[ch]: 
	(cr_string_peek_char_buf): added this method to peek the
	internal char string owned by CRString.
	* src/cr-term.c: 
	(cr_term_one_to_string): added this method to serialise
	only one term.
	* src/cr-tknzr.c: 
	(cr_tknzr_parse_name): fixed a bug here in the parsing 
	location gathering.
	(cr_tknzr_parse_hash): fixed another bug in the parsing 
	location gathering.
	
2004-03-27  Dodji Seketeli  <dodji@gnome.org>

	* src/cr-attr-sel.h,src/cr-doc-handler.h,
	src/cr-om-parser.c,src/cr-parser.[ch],
	src/cr-statement.[ch),src/cr-term.h,
	tests/test2-main.c,tests/test3-main.c:
	First attempt to have provide real
	parsing location information at the SAC level.
	I still need to write a test app for this and debug
	the feature.

2004-03-24  Dodji Seketeli  <dodji@gnome.org>
	
	* src/cr-input.[ch],src/cr-parser.[ch],
	src/cr-tknzr.[ch],src/cr-token.[ch],src/cr-parsing-location.c:
	Enable parsing location retrieval from CRInput, CRTknzr and CRparser.
	Record parsing location in every single token returned by
	CRTknzr::get_next_token().

2004-03-22  Dodji Seketeli <dodji@gnome.org>

	* added a field of type CRParsingLocation field to almost
	any language construction parsed into an abstract
	datastructure. This is a huge changeset.

2004-03-16  Dodji Seketeli <dodji@gnome.org>

	* ==================== 0.5 release ====================

	* croco-config.in: fixed this to include libxml2 and glib
	into cflags and libs.
	* docs/examples/cssom-example-1.c,docs/examples/sac-example-1.c,
	docs/examples/sac-example-2.c, docs/examples/selection-example-1.c,src/cr-sel-eng.c: 
	fix the code examples to reflect changes in 0.5, kill some
	memleaks where needed.
	* src/cr-sel-eng.c: killed a memleak in the selection engine.

2004-03-15  Dodji Seketeli <dodji@gnome.org>

	* tests/Makefile.am: added the tests/valgrind-version.sh file in
	the distribution.
	
	* tests/testctl: enforced the use of valgrind 2.1.1 or higher.
	* tests/valgrind-version.sh: added this file to test the version of
	the currently installed version of valgrind.

2004-03-14  Dodji Seketeli <dodji@gnome.org>

	* src/cr-style.c: 
	(cr_style_set_props_to_defaults): added more default props 
	init.
	* src/cr-fonts.h: modified some declarations here to
	ease the support of the "font-weight: bolder" and 
	"font-weight: lighter" support in sewfox.

	* src/cr-parser.[ch],src/cr-rgb.[ch],src/cr-style.c:
	applied a patch from Benjamin Dauvergne to add
	CRRgb::parse_from_buf() and CRRgb::set_from_term()
	methods. Modified the patch to comply with libcroco
	coding style and to kill a compiler warning.

2004-03-13  Dodji Seketeli <dodji@gnome.org>

	* Makefile.am,tests/Makefile.am,tests/test-output-refs/Makefile.am: 
	Added some distribution plumbing.

	* configure.in: bumped version number to 0.5 and bumped version-info.

	* src/cr-sel-eng.c,src/cr-stylesheet.c,
	src/cr-tknzr.c,tests/test5-main.c,tests/testctl:
	massive mem leaks/corruption killing.
	* vg.supp: added this to suppress glib normal leaks
	from the leak report.

2004-03-12  Dodji Seketeli <dodji@gnome.org>

	* src/cr-declaration.c,src/cr-doc-handler.c,
	src/cr-input.[ch],src/cr-parser.c,src/cr-rgb.c,
	src/cr-selector.c,src/cr-term.c,src/cr-token.c,
	tests/test1-main.c,tests/test4-main.c: started to kill mem leaks
	and corruptions.

	* tests/testctl: added the --show-reachable=yes flag to valgrind.

	* tests/testctl: added better valgrind error reporting.

2004-03-11  Dodji Seketeli <dodji@gnome.org>

	* Makefile.am: now, tests are to be run by doing "make test".
	Also, cleans up the previous test output before actually running.
	* global-vars.sh: added this sh script that sets variable used
	in all the test sh scripts based on csslint.
	* test-prop-ident,test-unknown-at-rule,test-unknown-at-rule2: 
	renamed these into *.sh (e.g) test-prop-ident.sh to reflect
	that it's a shell script, not a test written in C. 
	Also, make these use global-vars.sh
	* tests/testctl: added a descent valgrind support when runned
	with like "./testctl run --valgrind" or RUN_VALGRIND=yes ./testctl run.
	Puts the valgrind logs in valgrind-logs/ and report their presence
	to the user. This'll help catch mem leaks/corruption at the 
	regression test level.
	Also make sure to launch ./libs/testblah and not ./testblah which
	is actually a shell script.

	* tests/testctl: don't activate valgrind tests by default.

2004-03-10  Dodji Seketeli <dodji@gnome.org>

	* src/cr-statement.[ch]: 
	(cr_statement_to_string): do not add leading end of lines.
	* cr-stylesheet.c: added cr_stylesheet_to_string(), handle
	end of lines between statements here.
	* tests/test-output-refs/test5.1.css.out: updated non
	regression tests.

	* tests/testctl: added valgrind support in the non regression
	tests. I think I still need to improve it to make it detect
	the errors when there are some, and report it in a consistent
	way.

	* tests/testctl: added support for tests that gets
	called without any argument.
	* tests/* added csslint based non regression tests for proprietary INDENT and
	unknown at rule.

	* src/cr-utils.c: 
	(cr_utils_ucs1_to_utf8): handle zero length input gently.

	* src/cr-statement.c: finish the coding of the
	cr_statement_to_string() function and make cr_statement_dump()
	use it.
	* src/cr-term.c: merge from libcroco--mainline--0.1

2004-03-09  Dodji Seketeli <dodji@gnome.org>

	* src/cr-term.[ch]: applied a patch from Rob BUIS that adds
	two new methods:
	(cr_term_get_from_list) and (cr_term_get_from_list).

	* src/cr-statement.c:
          (cr_statement_font_face_rule_to_string): added this method.
          (cr_statement_dump_font_face_rule): make this use the new 
          cr_statement_font_face_rule_to_string() function.
        * tests/testctl: update this to exclude .arch-ids from the diffs.

	* src/cr-parser.c,src/cr-tknzr.c: droped the way I was handling 
	the vendor proprietary properties and make sure to parse and IDENT by
	following css3 rules.
	
	* src/cr-parser.c: 
	(cr_parser_parse_any_core): semicolon (';') is not part of the 'any' 
	production.
	(cr_parser_parse_ruleset): consider the case where we have an empty ruleset (e.g 'x{}')
	* {arch}/=tagging-method: changed this to make objects generation by the
	compilation accepted by tla.

2004-03-08  Dodji Seketeli <dodji@gnome.org>

	* Merged in the following patches:
        => dodji@seketeli.org--2004-xml-style-d/libcroco--dodji-d--0.1--base-0
	   tag of dodji@gnome.org--xml-style-2004/libcroco--mainline--0.1--base-0
	=> dodji@seketeli.org--2004-xml-style-d/libcroco--dodji-d--0.1--patch-1
	   removed useless files.

	* files.txt,dirs.txt: removed these files.

2004-03-07  Dodji Seketeli  <dodji@gnome.org>

	* src/cr-statement.c: 
	(parse_page_start_page_cb) fixed a memory management bug
	reported by Rob BUIS.
	(cr_statement_at_page_rule_to_string): added this new
	helper function.
	(cr_statement_dump_page): make this use 
	cr_statement_at_page_rule_to_string().
	* tests/test4-main.c: 
	(test_cr_statement_at_page_rule_parse_from_buf): added this
	to start debugging a problem related to @page rule parsing.
	
2004-03-07  Dodji Seketeli  <dodji@gnome.org>

	* src/*.c: re-indented the source files to make'em comply
	with gnome indentation rules.
	* libcroco-indent: added this indentation script.

2004-03-07  Dodji Seketeli  <dodji@gnome.org>

	* src/cr-style.c: applied a patch from
	Benjamin Dauvergne to support the "color" property.

2004-03-07  Dodji Seketeli  <dodji@gnome.org>

	* src/cr-rgb.[ch]:
	(cr_rgb_compute_from_percentage): added this new convenience 
	function.
2004-03-06  Dodji  <dodji@gnome.org>

	* src/cr-tknzr.c: 
	(cr_tknzr_parse_num): when you reach an EOF, don't assume it's
	an error. Return the already parsed part of the number.
	Next attempt of parsing will result in an CR_END_OF_INPUT_ERROR.
	* tests/test4-main.c: udpated this test the fix made above.	
	* Doxyfile: reflect the removal of src/parser src/seleng and
	src/layeng
	* src/cr-declaration.c: 
	(cr_declaration_list_to_string2): added this new method.
	* src/cr-sel-eng.c: fix a bug in the !important handling
	in the cascading algorithm.

2004-03-06  Dodji Seketeli  <dodji@gnome.org>

	* csslint/csslint.c: applied a patch from Rob BUIS
	to fix some bugs/memleaks here.
	Did some cleanups too.
	* src/cr-sel-eng.c:
	(cr_sel_eng_get_matched_rulesets_real):
	handle the case where the sheet is empty (has no rules). That
	can happen ! (it actually happened to me during some tests).
	(put_css_properties_in_props_list):
	handle the !important keyword in the cascading algorithm.
	Rob BUIS (again) started this.

2004-03-05  Dodji Seketeli  <dodji@gnome.org>

	* csslint/csslint.c: 
	(parse_cmd_line) fixed silly bug in there.
	* src/cr-declaration.[ch],src/cr-om-parser.c,
	src/cr-parser.[ch],src/cr-statement.c,tests/test2-main.c,
	tests/test3-main.c: 
	added the support of the "!important"
	keyword at the parsing level.
	* tests/test-inputs/test4.1.css: update nr tests to reflect
	the new !important thing.
	* src/cr-sel-eng.c: 
	(put_css_properties_in_props_list): fix a small subtle
	bug in here. Selection engine is becoming more and more
	reliable ;).

2004-03-04  Dodji Seketeli  <dodji@gnome.org>

	* src/cr-enc-handler.c:
	(cr_enc_handler_resolve_enc_alias): applied a patch
	from Kjartan Maraas to replace the g_strup() g_ascii_strup().
	This closes 
	* csslint/Makefile.am,src/cr-simple-sel.h,src/cr-term.h
	src/cr-token.h,tests/Makefile.am:
	Applied patch
	http://bugzilla.gnome.org/showattachment.cgi?attach_id=23422.
	Modified the patch a little bit so that I use prog_LDFLAGS instead
	of AM_LDFLAGS. AM_LDFLAGS just seems not to be supported by my
	automake-1.4.
	This fixes http://bugzilla.gnome.org/show_bug.cgi?id=131643 .
	* tests/test-output-refs/test4.2.css.out: updated this non
	regresstion test reference output due to a small modification
	in the @page rule dump format.

2004-03-03  Dodji Seketeli  <dodji@gnome.org>

	* csslint/csslint.c:
	(cssom_parse) put a '\n' after dumping the sheet on screen.
	* src/cr-parser.c:
	(cr_parser_parse_page): fixed a small bug in here.
	This should fix http://bugzilla.gnome.org/show_bug.cgi?id=136109.
	* src/cr-statement.c: 
	(cr_statement_dump_page): added a white space before dumping
	the pseudo part of the @page rule.

2004-03-03  Dodji Seketeli  <dodji@gnome.org>

	* csslint/csslint.c: added the support of selectors evaluation
	in csslint. Now, one can do csslint --evaluate --xml <an xml file>
	--author-sheet <a-css-sheet> --xpath <an xpath expression>.
	This will show the css properties associated to the xml node(s)
	refered to by the xpath expression.
	* src/cr-declaration.[ch]: 
	(cr_declaration_dump_one) added this new api entry to dump
	the first declaration of the declaration list.
	* src/cr-prop-list.c: 
	(cr_prop_list_unlink): fixed a stupid bug in there.
	* src/cr-stylesheet.[ch]: 
	(cr_stylesheets_nr_rules): there is a typo in this 
	function name. Stylesheet's' should not take a leading 's'.
	Changed that into cr_stylesheet_nr_rules().

2004-03-01  Dodji Seketeli  <dodji@gnome.org>

	* src/cr-prop-list.[ch]: added the (cr_prop_list_unlink) function.
	* src/cr-sel-eng.c: 
	(put_css_properties_in_props_list): put the properties at the
	end of the properties list built by this function. This is
	necessary to keep the properties declaration order. This order
	is significant for example when you consider short hand 
	properties expansion.

2004-02-29  Dodji Seketeli  <dodji@gnome.org>

	* src/cr-input.c,src/cr-num.c,src/cr-prop-list.[ch],
	src/cr-rgb.c:  applied a patch from Rob BUIS that fixes
	numeros typos. Also adds  G_BEGIN_DECL/G_END_DECL to
	cr-prop-list.h

2004-02-29  Dodji Seketeli  <dodji@gnome.org>

	* src/cr-rgb.c,src/cr-tknzr.c: remove the usage of '...' in switch/case statements
	as this is not portable across c89 compilers.
	
2004-02-29  Dodji Seketeli  <dodji@gnome.org>

	* src/cr-rgb.c: 
	(cr_rgb_set): fixed a stupid bug here.

2004-02-29  Dodji Seketeli  <dodji@gnome.org>

	* src/cr-sel-eng.c: applied a patch of Rob BUIS
	to add the support of the :lang() pseudo class using
	the pluggable pseudo class system.
	* tests/test5-main.c,tests/test-inputs/test5.1.css,tests/test-output-refs/test5.1.css.out:
	Updated the non regression tests suite to test the :lang() pseudo
	class.

2004-02-29  Dodji Seketeli  <dodji@gnome.org>

	* src/cr-statement.[ch],src/cr-stylesheet.[ch]:
	applied a patch from Rob BUIS that provides new apis
	to manipulate CSS statements.

2004-02-29  Dodji Seketeli  <dodji@gnome.org>

	* src/cr-sel-eng.c: 
	(put_css_properties_in_props_list): fixed a small bug in here:
	Always Initialise output function argument !!!.

2004-02-29  Dodji Seketeli <dodji@gnome.org>

	* src/cr-prop-list.[ch], src/Makefile.am,src/libcroco.h: 
	Created this new CRPropList class.
	* src/cr-sel-eng.c: 
	(put_css_properties_in_props_list): added this new helper
	function.
	(cr_sel_eng_get_matched_properties_from_cascade):
	Created a new version of this function to make it use
	the new CRPropList instead of a hashtable. Putting
	properties/declaration in a hashtable make us loose
	the "order" in which declarations are present in the
	ruleset. That's why I use a CRPropList instead.
	* src/cr-style.c: 
	(cr_style_set_style_from_decl): fix a silly error that
	make border-right and border-top switch.

2004-02-26  Dodji Seketeli  <dodji@gnome.org>

	* src/cr-sel-eng.c: 
	(cr_sel_eng_get_matched_properties_from_cascade):
	Second (or maybe third) attempt to fix the cascading
	cascading thing. I got *really* confused here.
	I hope it works this time.
	Thanks to to Rob BUIS who reported the bug.
	Off to bed now.

2004-02-24  Dodji Seketeli <dodji@gnome.org>

	* src/cr-parser.c: 
	(cr_parser_parse_import): fixed a parsing bug reported
	by David A Knight. This should now properly parse
	sequences of @import rules that without media parts.
	* src/cr-statement.c: (cr_statement_dump_import_rule):
	fixed a serialisation bug here.

2004-02-24  Dodji Seketeli  <dodji@gnome.org>

	* src/cr-parser.c,src/cr-tknzr.c,src/cr-token.[ch]: 
	 added the support of
	vendor specific property names.
	
2004-02-19  Dodji Seketeli  <dodji@gnome.org>

	* src/cr-sel-eng.c: 
	(cr_sel_eng_get_matched_properties_from_cascade): Fixed a bug
	that was "forgetting" all the properties gathered during the
	cascading algorithm but the last ones.
	* tests/Makefile.am: a bit of cleanup here.

2004-02-14  Dodji Seketeli  <dodji@gnome.org>

	* src/cr-declaration.[ch]: applied a patch from
	Rob BUIS<rwlbuis@xs4all.nl> that does a bunch of cleanup and
	fixes. It also adds the new cr_declaration_list_to_string() api
	entry point.
	* AUTHORS: updated this

2004-02-14  Dodji Seketeli  <dodji@gnome.org>

	* src/cr-declaration.[ch]:
	(cr_declaration_nr_props),
	(cr_declaration_get_from_list),
	(cr_declaration_get_by_prop_name):
	applied a patch from Rob BUIS<rwlbuis@xs4all.nl> that adds
	these api entry points.

2004-02-13  Dodji Seketeli  <dodji@gnome.org>

	* src/cr-declaration.c: 
	(cr_declaration_parse_list_from_buf): when we encounter an EOF
	right after a ';' don't return an error.
	* src/cr-parser.c: 
	(CHECK_PARSING_STATUS_ERR): fix a possibly nasty typo.
	(cr_parser_parse_property): when there is an error here,
	return the underlying error instead of returning just CR_PARSING_ERROR.
	(cr_parser_parse_declaration): when we encounter an EOF just at
	the beginning of parsing, return CR_END_OF_INPUT_ERROR instead
	of CR_PARSING_ERROR. More generaly, we should always return 
	CR_END_OF_INPUT_ERROR when we encounter that error, and not return
	CR_PARSING_ERROR instead.
	tests/test4-main.c: 
	(test_cr_declaration_parse_list): updated this to reflect catch
	trailing ';' at the end of declaration list.

2004-02-12  Dodji Seketeli  <dodji@gnome.org>

	* src/cr-declaration.[ch]: 
	(cr_declaration_parse_list_from_buf): added this new api entry point
	to parse comma separated list of property declarations.
	* src/cr-parser.c: 
	(cr_parser_parse_expr): dont return an error when we encounter EOF immediately
	at the end of an expression.
	(cr_parser_get_tknzr): added this new api entry point to get
	the parser's underlying tokenizer.
	* src/cr-statement.h: fixed a comment here.
	* tests/test4-main.c: wrote a test for the new
	cr_declaration_parse_list_from_buf() function.

2004-02-11  Dodji Seketeli  <dodji@gnome.org>

	* src/Makefile.am: make sure headers go in $prefix/include/libcroco/libcroco .

2004-02-10  Dodji Seketeli  <dodji@gnome.org>

	* src/cr-fonts.c: debugged serialization stuffs
	* src/cr-style.c: more serialization debugging
	
2004-02-08  dodji  <dodji@gnome.org>

	* src/cr-style.c: more style structure debugging materials.

2004-02-08  Dodji Seketeli  <dodji@gnome.org>

	* src/cr-style.c: more style structure debugging materials.

2004-02-07  Dodji Seketeli  <dodji@gnome.org>

	* src/cr-fonts.[hc],src/cr-num.h,src/cr-style.[ch]:
	In the process of adding style structure debugging facilities.

2004-02-04  Dodji Seketeli  <dodji@gnome.org>

	* src/cr-style.c: cr_style_to_string() added this prototype. 
	Still have to code it.

2004-01-29  Dodji Seketeli  <dodji@gnome.org>

        * src/cr-sel-eng.c: 
	(cr_sel_eng_get_matched_style): make sure to set the fields
	of the style structure passed as an argument of the function, when
	its not NULL.
	* src/cr-style.c: 
	(cr_style_set_props_to_defaults): make this function public

2004-01-27  Gael CHAMOULAUD  <strider@gnome.org>

	* configure.in: Removed the old references with libgnomeui and pango !
	* csslint/csslint.c: (csslint_show_version): Made smallish cleanup

2004-01-27  Dodji Seketeli  <dodji@gnome.org>

	* src/cr-cascade.c: 
	(cr_cascade_new) don't forget to set the UA sheet.
	* src/cr-cascade.h: add void cr_cascade_ref() entry point.
	
2004-01-26  Dodji Seketeli  <dodji@gnome.org>

	* src/cr-cascade.[ch]:
	(cr_cascade_ref),(cr_cascade_unref): new convenience function
	* src/cr-om-parser.[ch]:
	(cr_om_parser_parse_paths_to_cascade),
	(cr_om_parser_simply_parse_paths_to_cascade): added these new parsing methods.

2004-01-26  Dodji Seketeli  <dodji@gnome.org>

	* src/cr-utils.h: added CR_FILE_NOT_FOUND_ERROR to
	the CRStatus enum.

2004-01-24  Dodji Seketeli  <dodji@gnome.org>

	* all: separated the library into two projects. Libcroco
	is now the combination of the parser and the selection engine.
	A new project is born: sewfox. It is basically the 
	xml rendering/layout engine.
	Libcroco now needs libxml2 and glib only.
	Sewfox need libgnomecanvas2.
	* autogen.sh: updated this to reflect this big change
	* tests/test-output-refs/test7.out: removed this test
	as it does not belong to libcroco anymore.

2004-01-16  Dodji Seketeli  <dodji@gnome.org>

	* src/seleng/cr-sel-eng.c: applied a patch from
	Rob BUIS<rwlbuis@xs4all.nl> for a better class selector
	evaluation.

2004-01-04  Dodji Seketeli  <dodji@gnome.org>

	* src/parser/cr-declaration.c: 
	(cr_declaration_unlink): fixed a bug spoted by
	Rob BUIS.

2003-12-27  Dodji Seketeli  <dodji@gnome.org>

	* csslint/csslint.c: did some fixes/cleanup here.
	Make sure csslint --help shows a proper help.
	* src/parser/cr-statement.c: 
	(cr_statement_dump): when a NULL statement is given, do
	not dump anything, instead considering this as an error.
	* src/parser/cr-stylesheet.c: 
	(cr_stylesheet_dump): give the possibility to dump
	empty sheets, instead of considering this case as
	an error case.
	
2003-12-24  Dodji Seketeli  <dodji@gnome.org>

	* src/parser/cr-additional-sel.h,src/parser/cr-pseudo.h,
	src/parser/cr-utils.h: some light cosmetic changes.
	* src/seleng/cr-sel-eng.c: several fixes. Managed to
	make the pluggable handler for pseudo class selectors
	evaluation work. Wrote a handler for the ":first-child"
	pseudo class selector. This class is now officially supported.

2003-12-24  Dodji Seketeli  <dodji@gnome.org>

	* src/parser/cr-additional-sel.h: small cosmetic changes.
	* src/seleng/cr-sel-eng.c: started to work on the
	support of a pluggable handler for pseudo class selectors
	evaluation. Wrote facilities to register/unregister/lookup
	the handler.
	* src/seleng/cr-sel-eng.c: 
	(pseudo_class_add_sel_matches_node)  pluggable pseudo class selection
	evaluation architecture is in place. I still have to
	writte a real "handle" to handle say ":first-child" pseudo
	class so that I can test/debug the whole code.

2003-12-21  Dodji Seketeli  <dodji@gnome.org>

	* docs/design/parser-architecture.txt: fixed some typos.

2003-12-14  Dodji Seketeli <dodji@gnome.org>

	* docs/examples/selection-example-1.c:
	* docs/examples/selection-example-1.xml:
	* docs/examples/selection-example-1.css: added a test case
	for the A + B type of selectors.
	 added
	* src/seleng/cr-sel-eng.c: 
	(get_next_element_node)
	(get_prev_element_node)
	(get_next_parent_element_node): added these helper functions
	to help ignore non element nodes in the selector matcher.
	(sel_matches_node_real): Do not consider non element nodes
	when evaluating a selector.
	
2003-12-13  Dodji Seketeli <dodji@gnome.org>
============= 0.4 release ================
	* README: updated this.
	* docs/examples/sac-example-[12].c: make this compile with g++.	

2003-12-12  Dodji Seketeli <dodji@gnome.org>

	* docs/examples/selection-example-1.c: a bit of cleanup 
	and bug fix here.
	* docs/examples/selection-example-1.css: added more test cases.
	* src/seleng/cr-sel-eng.c: 
	(additional_selector_matches_node): added this function to 
	factorise the evaluation of additional selectors.
	(sel_matches_node_real ): use additional_selector_matches_node().
	This fixes a selector bug spotted by Stefan Seefeld.

2003-12-11  Dodji Seketeli <dodji@gnome.org>

	* configure.in: updated version numbers for 0.4.
	* src/layeng/cr-lay-eng.[ch]: 
	(cr_lay_eng_style_to_pango_font_attribute): added this so
	that the pango dependancy comes into the layout engine.
	* src/parser/cr-parser.c,src/parser/cr-selector.h,
	src/parser/cr-stylesheet.h,src/parser/cr-term.[ch],
	src/parser/cr-utils.h: 
	made sure libcroco headers files
	are C++ compilers friendly.
	* src/seleng/Makefile.am: remove pango dependancy from the
	selection engine. Put it in the layout engine.
	* src/seleng/cr-style.[ch]: 
	(cr_style_to_pango_font_attributes): removed this function
	from here and put it in src/layeng/cr-lay-eng.[ch]. This way,
	we seleng doesn't depend on pango. Only layout engine does.
	* Makefile.am: big cleanup here.
	* configure.in: make sure seleng, layeng and tests are 
	disabled by default. Added makefiles in docs/ docs/example
	tests/ tests/test-inputs tests/test-output-refs
	* csslint/Makefile.am: cleaned this up. make sure to add
	seleng,layeng and glib compile flags whenever needed.
	* docs/Makefile.am,docs/examples/Makefile.am: new makefiles.
	* src/libcroco.h: removed references to cr-parser-input.h
	* src/layeng/Makefile.am: cleanup, make distcheck is happier.
	* src/parser/Makefile.am: cleanup, make distcheck is happier.
	* src/parser/cr-doc-handler.h: removed reference to cr-parser-input.h
	* src/parser/cr-layout-eng.h,src/parser/cr-parser-input.h: removed these.
	* src/parser/cr-parser.c: 
	(cr_parser_new): fixed a typo here.
	* src/parser/cr-parser.h,src/parser/cr-tknzr.h: 
	removed ref to cr-parser-input.h
	* src/seleng/Makefile.am: cleanup, make distcheck is happier.
	* tests/testctl: exclude makefiles when diffing outputs and re outputs.
	* configure.in,src/layeng/Makefile.am,src/seleng/Makefile.am:
	Provides libcrseleng and libcrlayeng with version info 
	different from the one of libcroco.
	* src/layeng/Makefile.am,src/seleng/Makefile.am: Fixed more
	build system stuffs here.
	* docs/examples/cssom-example-1.c,docs/examples/sac-example-1.c: Make these
	compile with g++.
	* src/layeng/Makefile.am: another build system cleanup.
	* docs/examples/selection-example-1.c,docs/examples/selection-example-1.css,
	docs/examples/selection-example-1.xml: added this code example
	from Stefan Seefeld.

2003-08-17  Gaël CHAMOULAUD <strider@gnome.org>

	* src/layeng/cr-lay-eng.c: (layout_block_box):
	* src/seleng/cr-sel-eng.c: (put_css_properties_in_hashtable):
	Applied a patch from Michael Culbertson <Michael.J.Culbertson@wheaton.edu>
	-> Compilation failed with gcc 2.95.4 due to declarations after calls to 
	g_return_val_if_fail and the like.

2003-07-15  Dodji  <dodji@gnome.org>

	* src/seleng/cr-sel-eng.c (id_add_sel_matches_node): 
	fixed some stupid error that was making gcc 2.9xxx cry.

2003-07-05  Dodji Seketeli  <dodji@gnome.org>

	* src/seleng/cr-style.h: rearranged the enum CRNumProp values.
	
	* src/seleng/cr-style.c: fixed the border-x:<a number> bug.
	This now support also number and not only symbolic border width
	like thin,thick etc ...
	
	* src/parser/cr-num.c: documented the apis here.
	
	* src/layeng/cr-lay-eng.c: Fixed some subtle bugs and finally implemented
	the width:15% (set percentage to width).

2003-07-01  Dodji Seketeli  <dodji@gnome.org>

	* src/layeng/cr-lay-eng.c: put the 
	call to style_specified_2_computed_values() in the
	layout_box() function. It was previously in the create_box_tree_real().
	
	* src/layeng/cr-box-view.c: fixed a compiler warning.
	* hmmh first commit after 0.2 release.

2003-06-30  Dodji Seketeli <dodji@gnome.org>

	* tests/test-output-refs/test4.1.css.out: updated this
	test reference output.

	* src/parser/cr-statement.c: fixed a typo that lead to a small
	regression detected by the non regression test suite.

	* tests/testctl: made sure no to consider the .cvsignore file
	during the final diff.

	* src/layeng/cr-box-view.[ch]: fixed some compiler warnings.	

2003-06-28  Gaël Chamoulaud (strider) <strider@freespiders.org>

	* csslint/csslint.c (csslint_show_version): Added CROCO_LAYENG_ENABLED
	test in csslint_show_version function.	

2003-06-23  Dodji Seketeli  <dodji()47()seketeli()dot()org>

	* docs/design/parser-architecture.txt: more bits on this.

2003-06-22  Dodji Seketeli  <dodji@gnome.org>

	* src/parser/cr-statement.c: added
	parse_font_face_unrecoverable_error_cb(), 
	parse_page_unrecoverable_error_cb() ... to handle
	parsing error in the cr_statement_xxx_parse() method.
	These callback method are not called yet.
	
	* src/parser/cr-tknzr.c: made the cr_tknzr_parse_important() look
	somewhat better.
	
	* src/parser/cr-parser.c: fixed some bugs in the parser.
	It does now parse the w3c forward compatible parsing test sheet
	at http://www.w3.org/Style/CSS/Test/CSS1/current/sec71.htm .

	* docs/design/parser-architecture.txt: updated this doc.
	A lot more is still needed.

	* csslint/csslint.c: fixed some small bugs in csslint. Now, --cssom is
	set by default.

2003-06-21  dodji  <dodji()seketeli()org>

	* src/parser/cr-statement.[ch]:
	Changed the prototype of cr_statement_unlink() to
	harmonize it with cr_declaration_unlink().

2003-06-20  Dodji Seketeli  <dodji@gnome.org>

	* src/parser/cr-term.[ch]:
	added the  cr_term_parse_expression_from_buf() function.
	this is new and still needs to be tested.
	
	* src/parser/cr-parser.[hc]:
	made cr_parser_parse_expr() public.
	
	* src/parser/cr-declaration.[ch]:
	changed cr_declaration_parse() into 
	cr_declaration_parse_parse_from_buf().
	
	* src/parser/cr-statement.[ch]:
	fixed some typos.
	added the function cr_statement_does_buf_parses_against_core() and
	cr_statement_ruleset_get_declarations().
	
	* src/parser/cr-parser.[ch]:
	made cr_parser_parse_statement_core() public.
	
	* src/parser/cr-om-parser.c:
	fixed a small typo.
	
	* src/parser/cr-declaration.[ch]
	added a new cr_declaration_unlink() function.

2003-06-19  Dodji Seketeli  <dodji@gnome.org>

	* tests/test4-main.[ch]: updated this to test
	cr_statement_parse_from_buf(). It seems to work now.
	Still some memleaks to fix.

	* src/parser/cr-statement.[ch]:
	some bug fixes in cr_statement_parse_from_buf() + 
	added a new cr_statement_at_import_rule_parse_from_buf() method.

2003-06-18  Dodji Seketeli  <dodji@gnome.org>

	* src/parser/cr-statement.[ch]:
	added cr_statement_font_face_rule_parse_from_buf () .
	and a generic cr_statement_parse_from_buf () that knows
	how to a parse virtually any css2 statement. This needs debugging
	though.

	* src/parser/cr-parser.c: fixed some possible sigsev
	that could occur when trying to access a null sac handler.

	* tests/test4-main.c: updated the test routine to test
	cr_statement_at_charset_rule_parse_from_buf().
	
	* src/parser/cr-statement.[ch]: added a new
	cr_statement_at_charset_rule_parse_from_buf() method to
	to create an "@charset" statement from a buffer text content.

	* src/parser/cr-parser.c:Fixeds a small possibility of memleak
	in cr_parser_parse_charse()	
	
	* tests/test4-main.c: fixed a small typo in the "@page" rule
	embedded in gv_at_page_buf.
	
	* src/parser/cr-parser.c: fixed a small bug in the
	cr_parser_parse_page () function.

2003-06-17  Dodji Seketeli <dodji@gnome.org>

	* tests/test4-main.c: added test_cr_statement_at_page_rule_parse ()
	to test the new cr_statement_at_page_rule_parse_from_buf() function.
	
	* src/parser/cr-statement.[ch]:
	added a first version of cr_statement_at_page_rule_parse_from_buf().
	This doesn't work. I need to debug it first.
	
	* tests/test4-main.c: updated this to test
	cr_statement_at_media_rule_parse_from_buf().
	
	* src/parser/cr-statement.[ch]:
	debuged cr_statement_at_media_rule_parse_from_buf() and the functions
	it relies on.
	cr_statement_new_ruleset()=> fixed this so that it properly
	handles the containing  "@media" rule.
	cr_statement_new_at_media_rule =>fixed this so that it properly
	handles the contained rulesets.
	
	* src/parser/cr-statement.[hc]:
	coded  a first version of cr_statement_at_media_rule_parse_from_buf().
	This took the writing of a couple a SAC callback. Pfffew, SAC is a rather
	tedious api. cr_statement_at_media_rule_parse_from_buf() does not
	work yet, I still have to debug it.

	* src/parser/cr-parser.c: use the new cr_tknzr_peek_byte2 () function
	in the cr_parser_parse_import() method. This is a cleaner, smaller and
	faster than the older approach.

	* src/parser/cr-om-parser.c: use the
	cr_dup_glist_of_string () helper fonction in the
	start media callback.
	
	* src/parser/cr-utils.[ch]: fixed some 'const' omissions here also.
	
	* src/parser/cr-enc-handler.[ch]:
	fixed some "const" omissions.
	
2003-06-16  dodji  <dodji@gnome.org>

	* src/parser/cr-parser.[ch]: cr_parser_parse_charset(), 
	cr_parser_parse_import(), cr_parser_parse_page (),
	cr_parser_parse_font_face(), cr_parser_parse_media(),

	* src/parser/cr-tknzr.[ch]:
	added cr_tknzr_peek_byte2() function to export the functionalities
	of cr_input_peek_byte2().

2003-06-15  dodji  <dodji@gnome.org>

	* tests/test4-main.c: updated this to test the new
	cr_statement_ruleset_parse_from_buf () method.
	
	* src/parser/cr-statement.[ch]:
	Added a cr_statement_ruleset_parse_from_buf () method. This
	is based on the changes made in cr-parser.[ch].
	
	* src/parser/cr-selector.[ch]: 
	added a method cr_selector_parse_from_buf (). This is based
	on the changes made in cr-parser.[ch].

	* src/parser/cr-parser.[ch]: 
	Some rather important changes occured here ...
	revisited the way selectors and rulesets are parsed
	so that one could parse a buffer that contains only a ruleset.
	A visible implication of this is that cr_parser_parse_selector () and
	cr_parser_parse_ruleset () become public methods callable independantly.
	In the past, this was not possible. Only cr_parser_parse_stylesheet ()
	was public.
	
	* src/parser/cr-om-parser.c: updated this to comply with the
	changes made in cr-doc-handler.[ch].
	
	* src/parser/cr-doc-handler.[ch]: 
	1/ Created an explicitely private field of CRDocHandler
	to store parsing context, parsing result and any eventually
	needed private data structure. The privates fields are
	accessible through getters/setters though.	
	2/ made sure to increment the ref count of each instance
	of CRDocHandler at instanciation time. This may 
	introduce some memleaks in the working code. I will
	fix them in next commits.
	
	* src/parser/cr-declaration.c:
	(cr_declaration_append2() ): modified this so that
	we can append declaration to a list of declarations that
	don't belong to a ruleset.

2003-06-14  dodji  <dodji@gnome.org>

	* src/parser/cr-term.h (struct _CRTerm): fixed a typo.

	* src/layeng/cr-lay-eng.c, src/seleng/cr-style.[hc]: 
	more fonts selection implementation.	
	
	* tests/test7-main.c: updated this to test the font selection implem.	
	
2003-06-12  dodji  <dodji@gnome.org>

	* src/seleng/Makefile.am: added pango stuffs.
	* configure.in: added pango detection.
	* src/seleng/cr-fonts.c: a bit more font selection.
	* src/layeng/cr-lay-eng.c: a bit more font selection.
	* src/seleng/cr-style.c: font selection code again.

2003-06-09  Dodji  <dodji@gnome.org>
	* tests/test4-main.c: updated this test to test the
	new cr_declaration_to_string () api.
	
	* src/parser/cr-declaration.[ch] (cr_declaration_to_string ()):
	Added this new api to allow the serialisation of css declarations.
	This is not well tested yet, but it works.

	* src/parser/cr-parser.c (cr_parser_parse_declaration): 
	fixed a bug that prevented this parsing function to be called outside
	the stylesheet parsing context.

	* src/seleng/cr-style.[ch]: went forward in the font properties 
	gathering.
	
	* src/parser/cr-tknzr.[ch]: fixed some 'const" related compilation
	warnings.
	
	* src/parser/cr-parser.[ch]: exported the declaration parsing api
	so that cr_declaration_parse () can use it.
	
	* src/parser/cr-declaration.[ch]:
	added cr_declaration_parse () api. Not tested yet.
	
	* tests/test7-main.c: updated the test to reflect all the changes
	that happened today.
	
	* src/parser/cr-enc-handler.[ch], src/parser/cr-input.[ch], 
	src/parser/cr-om-parser.[hc], src/parser/cr-parser.[ch].
	Add the 'const' keyword in to function prototypes.

	
	* src/layeng/cr-lay-eng.c: 
	(compute_text_box_inner_edge_size ()) revisied this function to
	make it append the text label to it's container so that
	the size of the text label can be computed. I don't know how
	to do this otherwise. I would have liked this not to happen since
	compute_text_box_inner_edge_size () is part of the layout process
	not the rendering process. Now these two processes are much more
	tied than I would like.
	
	* src/layeng/cr-box.c:
	updated the cr_box_to_string () method to make it serialise
	CRBox->inner_edge.max_width for debug purposes.

	* src/layeng/cr-box-view.c: 
	1/now, the layout code is called
	in the "expose-event" signal callback. Trying to isolate the
	layout from the rendering appears to be too difficult 
	if not impossible.
	
	2/created a cr_box_view_new_from_xml_css_bufs () method to create
	a box view directly from a css buffer and an xml buffer.

2003-06-04  Dodji  <dodji@gnome.org>

	* tests/test7-main.c: created a new xml/css document to bring the test to
	a broader extend. It appeared that libcroco's layout code is 
	damned bugged... I am debugging it...

	* src/seleng/cr-style.c:changed the default element display property
	to "block" and not "inline" anymore.
	Also made the set_prop_background_color () function support
	hex strings (e.g.: #ffffff or #ee)

	* src/parser/cr-rgb.[ch]: added cr_rgb_set_from_hex_str ()
	to support hash (hex) strings (#ffffff or #eee).

	* src/parser/cr-num.c:support of fixed/variable length numbers.

	* src/layeng/cr-lay-eng.c: a lot of layout fixes.
	

2003-05-31	Kang Jeong-Hee	<Keizi@mail.co.kr>

	* src/parser/*.[ch]: s/void */gpointer/

2003-05-12  Dodji  <dodji@gnome.org>

	* tests/test7-main.c: updated the test to reflect the new supported
	css2 properties.

	* src/layeng/cr-style.c:
	(set_prop_border_x_width_from_value ()) debugged this.	
	(set_prop_border_x_style_from_value ()) debugged this.
	
	* src/layeng/cr-box-view.c:
	(draw_borders ()) debugged this a lot.

2003-05-07  Dodji  <dodji@gnome.org>

	* tests/test7-main.c: just added a test for the "background-color" 
	property.

	* src/layeng/cr-box-view.c:
	(set_color ()) added this function to manage the setting
	of rgb color in an easier way than set_background/foreground().
	(set_border_line_attrs ()) implemented the border-x-color
	property setting in this function. This uses the new set_color ()
	function.
	(draw_padding ()) revisited this function to make it draw
	a padding area that has "background" color.
	
	
2003-05-06  Dodji  <dodji@gnome.org>

	* src/layeng/cr-style.[ch]: started to add the support of
	the "color" and "background-color" properties.

	* src/layeng/cr-lay-eng.c:
	(style_specified_2_computed_value()) updated this function to
	compute also the new colors properties (color and background-color).
	
	* src/layeng/cr-box-view.c:
	(set_background_color ()) 
	(set_foreground_color ())added these functions to set the box 
	inner/padding edge color.
	also started to use these two functions to test them.
	
2003-05-05  Dodji  <dodji@gnome.org>

	* tests/test7-main.c: small update for debug purposes.

	* src/layeng/cr-style.h: cleanup.

	* src/layeng/cr-lay-eng.c: put in here what is needed to support
	border-x and border-style-x properties.

	* src/layeng/cr-box.[ch]: make CRBoxModel inherits CRBox.

	* src/layeng/cr-box-view.c: start to support the border-style-x and
	border-x property. I must test this.

	* configure.in: defined a personal environment where I can set
	the CFLAGS I want.

2003-05-04  Dodji  <dodji@gnome.org>

	* src/parser/cr-tknzr.c:
	(cr_tknzr_get_next_token ()) fixed a small bug in here.
	
	* src/layeng/cr-style.[ch]: 
	Deeply Modified the layout of the CRStyle structure for 
	1/group all numerical properties together in a table.
	2/group all color (rgb) properties together in another table.
	3/group all border style properties together in another table.
	That way, accessing those properties is more efficient.
	4/make sure that each properties can have 3 values:
	specified, computed and actual value as specified by the css2 spec. 
	(I doubt actuall value is usefull
	here though).
	Modified the file to make this be coherent again.

	* src/layeng/cr-lay-eng.c :
	Made this coherent after the change of the CRStyle structure.
	
	(normalize_num ()):created this function to
	normalize numerical properties.
	(style_specified_2_computed_values ): 
	new function to computed css2 "computed values" from specified values.
	This is required by the css2 spec in chap 6.1.
	(create_box_tree_real): updated this to make it call 
	style_specified_2_computed_values () before actually building the box.

2003-05-01  Dodji  <dodji@gnome.org>

	* configure.in, csslint/Makefile.am, src/parser/Makefile.am, src/seleng/Makefile.am, src/layeng/Makefile.am: 
	fixed #111895

2003-04-28  Dodji  <dodji@gnome.org>

	* tests/test7-main.c: woohoo, this now shows some text. 
	Okay, it is a crappy design sketch, but this is a milestone.

	* src/layeng/cr-lay-eng.c: store the created label widget in the cache.
	box content cache.
	* src/layeng/cr-box.h:created a box content cache to store the label 
	widget used to calculate text box size.
	
	* src/layeng/cr-box-view.[hc]: made this simpler and manage to
	make it show someting on the screen. Now the box view
	is just the view port. To render the box model, we just walk thru it
	and draw each box in the box view.
	

2003-04-26  dodji  <dodji@gnome.org>
	
	* configure.in: made sure to include the libgnomeui clflags and
	 libsflags to croco libs and croco cflags when the layeng is turned
	 on.
	* csslint/Makefile.am: made sure to use the CROCO_LIBS and CROCO_CLFAGS
	 variables.
	* src/libcroco.h: added the cr-box-view.h include file
	* src/layeng/cr-box-view.c: started to write a draw_box() function that
	 will draw the box tree on the screen.
	* src/layeng/cr-lay-eng.c: removed the adjust_edges_on_inner_edge () function.
	* tests/Makefile.am: made sure to include libgnomeui clfags and libs
	 when layeng is turned on.
	* tests/test7-main.c: made started to include a cr-box-view.c test.

2003-04-20  dodji  <dodji@gnome.org>

	* tests/test7-main.c: updated the test7 code to see the layout in
	action.

	* src/layeng/cr-style.[ch]: just modified some rule 
	names for convenience.

	* src/layeng/cr-lay-eng.[ch]:
	when forward in normal flow layout code. Have now very basic layout code.
	Still have to write a canvas code to render the layed out box.

        * src/layeng/cr-lay-eng.c (compute_text_box_inner_edge_size): started to work on the
	the inner edge size computation based on pango.

	* src/layeng/Makefile.am: updated to compile/link against libgnomeui.
	* configure.in: updated it to test the presence
	of libgnomeui if and only if the layout engine is enabled.

2003-04-15  Alexander Larsson  <alexl@redhat.com>

	* Makefile.am:
	Change _DATA to _HEADERS for header
	
	* src/Makefile.am:
	Only use filename for _HEADERS.
	remove libcroco-config.h from _HEADERS

2003-04-12  dodji  <dodji@gnome.org>

	* src/* made a big change of the source tree.
	Now, the whole thing is divided in 3 parts:
	the paser, the selection engine and the layout engine.
	The parser source files produce a libcroco.so shared lib.
	The selection engine source files produce a libcrseleng.so shared
	library.
	The layout engine source fils produce a libcrlayeng.so shared
	library.
	The same configure options as before apply.

2003-04-05  Dodji  <dodji@gnome.org>

	* src/cr-token.h (struct _CRToken): 
	applied a patch from Greg Lee <greg@ling.lll.hawaii.edu>,
	which solves a compilation error under gcc 2.95.3. Basically,
	it transforms an implicitly defined  union into an explicitly
	defined one. Modified all the files impacted.
	
2003-04-03  Dodji  <dodji@gnome.org>

	* tests/testctl: can now run one single test. This can also
	run all the tests a run a simple report that summarizes the
	results of the tests.

	* configure.in: make sure this generates the libcroco.spec file.
	make sure to test the presence of glib2 during configure.

	* libcroco.spec.in: added autoconf magic in this.
	Can now generate an rpm by typing make rpm. Before that,
	the user that types make rpm must have write acess to
	/usr/src .

2003-04-02  Gaël Chamoulaud (strider) <strider@freespiders.org>
	
	* croco-config.1: updated the man page
	* csslint/csslint.1: updated the man page

2003-04-01  Dodji  <dodji@gnome.org>

	* tests/testctl: started to code the libcroco test launcher script.
	it is not useable yet, but work is in progress.

2003-03-31  Dodji  <dodji@gnome.org>
	* src/cr-lay-eng.c: started to code the tree annotation process.
	I seriously need to debug this.
	
	* configure.in: put in there the list of tests to be compile
	and the conditions cause AM_CONDITIONAL() is buggy and does
	not seem to fit my needs. Also modified tests/Makefile.am
	to take this in account.
	
	* tests/test7-main.c: added this file to debug the layout engine
	related stuffs.

	* croco-config.1: some minor fixes in the man page.
	
2003-03-30 Christian Schaller <uraeus@gnome.org>
	* Fixed disting by adding manpages to EXTRA_DIST
	* Added spec.in file, this need to be added to build 
	  system to generate .spec file.
	* Remove Makefile.in from CVS, this is a generated file
	
2003-03-30  Dodji  <dodji@gnome.org>
	* autogen.sh: 
	Made sure that in dev mode, the configure scripts
	gets called with --enable-tests=yes --enable-seleng=yes
	--enable-layeng=yes. This options being set to 'no' by default.

	* src/cr-lay-eng.c: 
	Started to code a layout engine. This is more a design
	sketch than real usefull code so far.

        * src/cr-cascade.c:
	Started to code a #CRCascade class to abstract a css2 cascade.	
	This is more a placeholder (or a design sketch) than real
	usefull code today.
	
	* tests/Makefile.am: improved the conditional compilation
	of the tests; e.g if the selection engine feature is disabled
	the selection engine tests won't be compiled.	
	* configure.in: added --enable-layeng to contionaly compile
	the layout engine files. Also improved the handling of
	of the enable-xxx arguments => 'yes' forces the feature to
	be enabled (the coder knows what he is doing); 'auto' checks
	if the features xxx depends on are available and then
	switches xxx on.

2003-03-24  dodji  <dodji@gnome.org>
	* src/cr-style.c (cr_style_set_style_from_decl): 
	Have a first hot (and bugged) implem of this function.	
	I can now, go and get worried about building the annotated
	xml tree.

2003-03-20  Gaël Chamoulaud  <strider@freespiders.org>

	* Makefile.am (SUBDIRS): added man page for croco-config

2003-03-20  Dom Lachowicz <cinamod@hotmail.com>

	* COPYING: replace with contents from COPYING.LIB (GNU LGPL)
	
2003-03-20  Gaël Chamoulaud  <strider@freespiders.org>

	* configure.in: added conditional compilation of the unit tests
	in tests/ subdir 

	* tests/Makefile.am (INCLUDES): conditional compilation of the unit tests
	in tests/ subdir 

2003-03-19  Gaël Chamoulaud  <strider@freespiders.org>

	* Relicense from GPL -> LGPL

2003-03-18  Gaël Chamoulaud  <strider@freespiders.org>

	* configure.in: fixed a configure bug. Make sure to properly
	check the libxml2 versions.

2003-03-18  Dom Lachowicz <cinamod@hotmail.com>

	* autogen.sh: Use gnome-autogen (cvs co gnome-common). Creates libtool
	and other things properly

	* configure.in: better check for LIBXML2, conditional compilation of
	the SELENG module

	* tests/Makefile.am: disable test5 until I can think of a better 
	work-around
	
2003-03-16  dodji  <dodji@gnome.org>

	* src/cr-style.c (set_border_x_style_from_value): 
	new method added to gather 'border_top_style' ... 'border_left_style'
	properties value from the css stylesheet.
	
	(set_border_x_width_from_value): completed this function
	to properly gather 'border_top_width' ... 'border_left_width'
	properties values from the css stylesheet.

	* src/cr-num.c (cr_num_set): new method added.

2003-03-15  dodji  <dodji@gnome.org>

	* src/cr-utils.[ch]
	added some new helper functions/did some cleanups.
	
	* src/cr-tknzr.[ch]:
	made the necessary modifs implied by the new CRNum/CRTerm type
	system.

	* src/cr-term.[ch]:
	big cleanup of the CRTerm/CRNum typing system.

	* src/cr-style.[ch]:
	went forward in the style data structure population code.

	* src/rgb.[ch]:
	made the necessary modifs implied by the new CRNum type
	system
	
	* src/cr-parser.c:
	made the necessary modifs implied by the new CRNum type
	system

	* src/cr-num.[ch]: did some big changes for a better
	handling of numeric types.

2003-03-05  Dodji  <dodji@gnome.org>

	* src/cr-parser.c (cr_parser_new_from_buf): 
	new method to parse stylesheets from in memory buffers.

2003-03-04  Dodji  <dodji@seketeli.og>

	* src/cr-input.c (cr_input_new_from_buf): 
	added this new method to instanciate an input stream from
	an in memory buffer.
	(cr_input_new_from_uri): modified this method to make it
	use the new cr_input_new_from_buf() method.

2003-03-03  Dodji  <dodji@gnome.org>

	* tests/README-description.txt: 
	added this test description file in the project.
	
	* src/cr-sel-eng.c (cr_sel_eng_get_matched_rulesets_real): 
	renamed the function cr_sel_eng_get_rulesets_real() into
	this new one. Modified it memory management model so that 
	1/ it does not allocate it output array
	2/ caller can use it in a incremental way and get the rulesets
	chunck by chunk.
	(cr_sel_eng_sel_get_matched_rulesets): 
	added this public interface based on the private interface
	cr_sel_eng_get_matched_rulesets_real().
	

2003-03-02  Dodji  <dodji@gnome.org>

	* src/cr-sel-eng.c (cr_sel_eng_get_rulesets_real): 
	started to code an implementation of a ruleset "requester".
	Still have to debug all this.

2002-09-25  dodji  <dodji@gnome.org>

	* src/cr-utils.h: updated this file to define stuffs needed by
	other modules.

	* src/cr-parser-input.c: started to write down code to handle
	the stacked parser input.

