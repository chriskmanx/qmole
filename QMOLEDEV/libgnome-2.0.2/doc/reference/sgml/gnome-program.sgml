<refentry id="libgnome-gnome-program">
<refmeta>
<refentrytitle>gnome-program</refentrytitle>
<manvolnum>3</manvolnum>
<refmiscinfo>LIBGNOME Library</refmiscinfo>
</refmeta>

<refnamediv>
<refname>gnome-program</refname><refpurpose>Initialize and retrieve information about a GNOME application.</refpurpose>
</refnamediv>

<refsynopsisdiv><title>Synopsis</title>
<synopsis>

#include &lt;libgnome/libgnome.h&gt;


enum        <link linkend="GnomeFileDomain">GnomeFileDomain</link>;
struct      <link linkend="GnomeProgram">GnomeProgram</link>;
struct      <link linkend="GnomeModuleInfo">GnomeModuleInfo</link>;
struct      <link linkend="GnomeModuleRequirement">GnomeModuleRequirement</link>;
void        (<link linkend="GnomeModuleInitHook">*GnomeModuleInitHook</link>)          (const <link linkend="GnomeModuleInfo">GnomeModuleInfo</link> *mod_info);
void        (<link linkend="GnomeModuleClassInitHook">*GnomeModuleClassInitHook</link>)     (<link linkend="GnomeProgramClass">GnomeProgramClass</link> *klass,
                                             const <link linkend="GnomeModuleInfo">GnomeModuleInfo</link> *mod_info);
void        (<link linkend="GnomeModuleHook">*GnomeModuleHook</link>)              (<link linkend="GnomeProgram">GnomeProgram</link> *program,
                                             <link linkend="GnomeModuleInfo">GnomeModuleInfo</link> *mod_info);
<link linkend="GnomeProgram">GnomeProgram</link>* <link linkend="gnome-program-init">gnome_program_init</link>            (const char *app_id,
                                             const char *app_version,
                                             const <link linkend="GnomeModuleInfo">GnomeModuleInfo</link> *module_info,
                                             int argc,
                                             char **argv,
                                             const char *first_property_name,
                                             ...);
<link linkend="GnomeProgram">GnomeProgram</link>* <link linkend="gnome-program-initv">gnome_program_initv</link>           (<link linkend="GType">GType</link> type,
                                             const char *app_id,
                                             const char *app_version,
                                             const <link linkend="GnomeModuleInfo">GnomeModuleInfo</link> *module_info,
                                             int argc,
                                             char **argv,
                                             const char *first_property_name,
                                             va_list args);

<link linkend="GnomeProgram">GnomeProgram</link>* <link linkend="gnome-program-get">gnome_program_get</link>             (void);
const char* <link linkend="gnome-program-get-human-readable-name">gnome_program_get_human_readable_name</link>
                                            (<link linkend="GnomeProgram">GnomeProgram</link> *program);
const char* <link linkend="gnome-program-get-app-id">gnome_program_get_app_id</link>        (<link linkend="GnomeProgram">GnomeProgram</link> *program);
const char* <link linkend="gnome-program-get-app-version">gnome_program_get_app_version</link>   (<link linkend="GnomeProgram">GnomeProgram</link> *program);
<link linkend="gchar">gchar</link>*      <link linkend="gnome-program-locate-file">gnome_program_locate_file</link>       (<link linkend="GnomeProgram">GnomeProgram</link> *program,
                                             <link linkend="GnomeFileDomain">GnomeFileDomain</link> domain,
                                             const <link linkend="gchar">gchar</link> *file_name,
                                             <link linkend="gboolean">gboolean</link> only_if_exists,
                                             <link linkend="GSList">GSList</link> **ret_locations);

void        <link linkend="gnome-program-module-register">gnome_program_module_register</link>   (const <link linkend="GnomeModuleInfo">GnomeModuleInfo</link> *module_info);
<link linkend="gboolean">gboolean</link>    <link linkend="gnome-program-module-registered">gnome_program_module_registered</link> (const <link linkend="GnomeModuleInfo">GnomeModuleInfo</link> *module_info);
const <link linkend="GnomeModuleInfo">GnomeModuleInfo</link>* <link linkend="gnome-program-module-load">gnome_program_module_load</link>
                                            (const char *mod_name);
<link linkend="guint">guint</link>       <link linkend="gnome-program-install-property">gnome_program_install_property</link>  (<link linkend="GnomeProgramClass">GnomeProgramClass</link> *pclass,
                                             <link linkend="GObjectGetPropertyFunc">GObjectGetPropertyFunc</link> get_fn,
                                             <link linkend="GObjectSetPropertyFunc">GObjectSetPropertyFunc</link> set_fn,
                                             <link linkend="GParamSpec">GParamSpec</link> *pspec);
<link linkend="poptContext">poptContext</link> <link linkend="gnome-program-preinit">gnome_program_preinit</link>           (<link linkend="GnomeProgram">GnomeProgram</link> *program,
                                             const char *app_id,
                                             const char *app_version,
                                             int argc,
                                             char **argv);
void        <link linkend="gnome-program-parse-args">gnome_program_parse_args</link>        (<link linkend="GnomeProgram">GnomeProgram</link> *program);
void        <link linkend="gnome-program-postinit">gnome_program_postinit</link>          (<link linkend="GnomeProgram">GnomeProgram</link> *program);

#define     <link linkend="GNOME-PARAM-POPT-TABLE-CAPS">GNOME_PARAM_POPT_TABLE</link>
#define     <link linkend="GNOME-PARAM-POPT-FLAGS-CAPS">GNOME_PARAM_POPT_FLAGS</link>
#define     <link linkend="GNOME-PARAM-POPT-CONTEXT-CAPS">GNOME_PARAM_POPT_CONTEXT</link>
#define     <link linkend="GNOME-PARAM-CREATE-DIRECTORIES-CAPS">GNOME_PARAM_CREATE_DIRECTORIES</link>
#define     <link linkend="GNOME-PARAM-ENABLE-SOUND-CAPS">GNOME_PARAM_ENABLE_SOUND</link>
#define     <link linkend="GNOME-PARAM-ESPEAKER-CAPS">GNOME_PARAM_ESPEAKER</link>
#define     <link linkend="GNOME-PARAM-APP-ID-CAPS">GNOME_PARAM_APP_ID</link>
#define     <link linkend="GNOME-PARAM-APP-VERSION-CAPS">GNOME_PARAM_APP_VERSION</link>
#define     <link linkend="GNOME-PARAM-GNOME-PREFIX-CAPS">GNOME_PARAM_GNOME_PREFIX</link>
#define     <link linkend="GNOME-PARAM-GNOME-SYSCONFDIR-CAPS">GNOME_PARAM_GNOME_SYSCONFDIR</link>
#define     <link linkend="GNOME-PARAM-GNOME-DATADIR-CAPS">GNOME_PARAM_GNOME_DATADIR</link>
#define     <link linkend="GNOME-PARAM-GNOME-LIBDIR-CAPS">GNOME_PARAM_GNOME_LIBDIR</link>
#define     <link linkend="GNOME-PARAM-APP-PREFIX-CAPS">GNOME_PARAM_APP_PREFIX</link>
#define     <link linkend="GNOME-PARAM-APP-SYSCONFDIR-CAPS">GNOME_PARAM_APP_SYSCONFDIR</link>
#define     <link linkend="GNOME-PARAM-APP-DATADIR-CAPS">GNOME_PARAM_APP_DATADIR</link>
#define     <link linkend="GNOME-PARAM-APP-LIBDIR-CAPS">GNOME_PARAM_APP_LIBDIR</link>
#define     <link linkend="GNOME-PARAM-HUMAN-READABLE-NAME-CAPS">GNOME_PARAM_HUMAN_READABLE_NAME</link>
#define     <link linkend="GNOME-PARAM-GNOME-PATH-CAPS">GNOME_PARAM_GNOME_PATH</link>
#define     <link linkend="GNOME-PARAM-NONE-CAPS">GNOME_PARAM_NONE</link>
#define     <link linkend="GNOME-PROGRAM-STANDARD-PROPERTIES-CAPS">GNOME_PROGRAM_STANDARD_PROPERTIES</link>


</synopsis>
</refsynopsisdiv>





<refsect1>
<title>Description</title>
<para>

</para>
</refsect1>

<refsect1>
<title>Details</title>
<refsect2>
<title><anchor id="GnomeFileDomain">enum GnomeFileDomain</title>
<programlisting>typedef enum {
    GNOME_FILE_DOMAIN_UNKNOWN = 0,

    /* Gnome installed files */
    GNOME_FILE_DOMAIN_LIBDIR,
    GNOME_FILE_DOMAIN_DATADIR,
    GNOME_FILE_DOMAIN_SOUND,
    GNOME_FILE_DOMAIN_PIXMAP,
    GNOME_FILE_DOMAIN_CONFIG,
    GNOME_FILE_DOMAIN_HELP,

    /* Application files */
    GNOME_FILE_DOMAIN_APP_LIBDIR,
    GNOME_FILE_DOMAIN_APP_DATADIR,
    GNOME_FILE_DOMAIN_APP_SOUND,
    GNOME_FILE_DOMAIN_APP_PIXMAP,
    GNOME_FILE_DOMAIN_APP_CONFIG,
    GNOME_FILE_DOMAIN_APP_HELP
} GnomeFileDomain;
</programlisting>
<para>
Many of the files that a GNOME application needs to access will be installed in
standard locations. For example, GNOME help files will be in one location,
while help files specific to the current application might be in another
location.
</para>
<para>
The different types of files are given in this enum. User applications make use
of the <structfield>GNOME_FILE_DOMAIN_APP_*</structfield> types, which specify
locations relative to <link linkend="GNOME-PARAM-APP-DATADIR-CAPS">GNOME_PARAM_APP_DATADIR</link>.
</para><informaltable pgwide="1" frame="none" role="enum">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row>
<entry><literal>GNOME_FILE_DOMAIN_UNKNOWN</literal></entry>
<entry>An unknown file domain (should never be used).
</entry>
</row>
<row>
<entry><literal>GNOME_FILE_DOMAIN_LIBDIR</literal></entry>
<entry>Libraries in the main GNOME installation.
</entry>
</row>
<row>
<entry><literal>GNOME_FILE_DOMAIN_DATADIR</literal></entry>
<entry>Data files in the main GNOME installation.
</entry>
</row>
<row>
<entry><literal>GNOME_FILE_DOMAIN_SOUND</literal></entry>
<entry>Sound files in the main GNOME installation.
</entry>
</row>
<row>
<entry><literal>GNOME_FILE_DOMAIN_PIXMAP</literal></entry>
<entry>Pixmap files in the main GNOME installation.
</entry>
</row>
<row>
<entry><literal>GNOME_FILE_DOMAIN_CONFIG</literal></entry>
<entry>Config files in the main GNOME installation.
</entry>
</row>
<row>
<entry><literal>GNOME_FILE_DOMAIN_HELP</literal></entry>
<entry>Help files in the main GNOME installation.
</entry>
</row>
<row>
<entry><literal>GNOME_FILE_DOMAIN_APP_LIBDIR</literal></entry>
<entry>Application specific libraries.
</entry>
</row>
<row>
<entry><literal>GNOME_FILE_DOMAIN_APP_DATADIR</literal></entry>
<entry>Application specific data files.
</entry>
</row>
<row>
<entry><literal>GNOME_FILE_DOMAIN_APP_SOUND</literal></entry>
<entry>Application specific sound files.
</entry>
</row>
<row>
<entry><literal>GNOME_FILE_DOMAIN_APP_PIXMAP</literal></entry>
<entry>Application specific pixmap files.
</entry>
</row>
<row>
<entry><literal>GNOME_FILE_DOMAIN_APP_CONFIG</literal></entry>
<entry>Application specific config files.
</entry>
</row>
<row>
<entry><literal>GNOME_FILE_DOMAIN_APP_HELP</literal></entry>
<entry>Application specific help files.

</entry>
</row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="GnomeProgram">struct GnomeProgram</title>
<programlisting>struct GnomeProgram
{
    GObject object;

    GnomeProgramPrivate *_priv;
};
</programlisting>
<para>
A structure containing information about the current application. Initialised
during a call to <link linkend="gnome-program-init">gnome_program_init</link>().
</para><informaltable pgwide="1" frame="none" role="struct">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row>
<entry><link linkend="GObject">GObject</link> <structfield>object</structfield></entry>
<entry>A <link linkend="GObject">GObject</link> containing the parameters and their values which were set
dring initialisation.
</entry>
</row>
<row>
<entry><link linkend="GnomeProgramPrivate">GnomeProgramPrivate</link> *<structfield>_priv</structfield></entry>
<entry>Private data about the program instance.

</entry>
</row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="GnomeModuleInfo">struct GnomeModuleInfo</title>
<programlisting>struct GnomeModuleInfo {
    const char *name;
    const char *version;
    const char *description;
    GnomeModuleRequirement *requirements; /* last element has NULL version */

    GnomeModuleHook instance_init;
    GnomeModuleHook pre_args_parse, post_args_parse;

    struct poptOption *options;

    GnomeModuleInitHook init_pass;

    GnomeModuleClassInitHook class_init;

    const char *opt_prefix;
    gpointer    expansion1;
};
</programlisting>
<para>
A structure containing information about a module. This contains descriptive
information about the module, as well as how to initialise it and what its
dependencies are (chained via the <parameter>requirements</parameter> parameter).
</para><informaltable pgwide="1" frame="none" role="struct">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row>
<entry>const char *<structfield>name</structfield></entry>
<entry>The module name.
</entry>
</row>
<row>
<entry>const char *<structfield>version</structfield></entry>
<entry>The module's version string.
</entry>
</row>
<row>
<entry>const char *<structfield>description</structfield></entry>
<entry>A string describing the module (can be <literal>NULL</literal>).
</entry>
</row>
<row>
<entry><link linkend="GnomeModuleRequirement">GnomeModuleRequirement</link> *<structfield>requirements</structfield></entry>
<entry>A pointer to an array of modules that are required by this
module. The last module in the array should have its required_version field set
to <literal>NULL</literal>.
</entry>
</row>
<row>
<entry><link linkend="GnomeModuleHook">GnomeModuleHook</link> <structfield>instance_init</structfield></entry>
<entry>A function to call to initialise an instance of this module
(can be <literal>NULL</literal>).
</entry>
</row>
<row>
<entry><link linkend="GnomeModuleHook">GnomeModuleHook</link> <structfield>pre_args_parse</structfield></entry>
<entry>A function to call before parsing the arguments for this
module (can be <literal>NULL</literal>).
</entry>
</row>
<row>
<entry><link linkend="GnomeModuleHook">GnomeModuleHook</link> <structfield>post_args_parse</structfield></entry>
<entry>A function to call after parsing the arguments for this
module (can be <literal>NULL</literal>).
</entry>
</row>
<row>
<entry>struct <link linkend="poptOption">poptOption</link> *<structfield>options</structfield></entry>
<entry>A <link linkend="poptOption">poptOption</link> structure giving any special arguments for this module
(can be <literal>NULL</literal>).
</entry>
</row>
<row>
<entry><link linkend="GnomeModuleInitHook">GnomeModuleInitHook</link> <structfield>init_pass</structfield></entry>
<entry>A function which is run before the <parameter>init_instance</parameter> function to allow
the module to register other modules as needed. The module cannot assume its
required modules are initialized (although they might be).
</entry>
</row>
<row>
<entry><link linkend="GnomeModuleClassInitHook">GnomeModuleClassInitHook</link> <structfield>class_init</structfield></entry>
<entry>A function to call to initialise this module prior to creating any
instances (can be <literal>NULL</literal>).
</entry>
</row>
<row>
<entry>const char *<structfield>opt_prefix</structfield></entry>
<entry>Unused.
</entry>
</row>
<row>
<entry><link linkend="gpointer">gpointer</link> <structfield>expansion1</structfield></entry>
<entry>Unused.

</entry>
</row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="GnomeModuleRequirement">struct GnomeModuleRequirement</title>
<programlisting>struct GnomeModuleRequirement {
    const char *required_version;
    const GnomeModuleInfo *module_info;
};
</programlisting>
<para>
A structure which allows a module to specify the minimum required versions of
modules it depends upon.
</para><informaltable pgwide="1" frame="none" role="struct">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row>
<entry>const char *<structfield>required_version</structfield></entry>
<entry>The version required by the parent module.
</entry>
</row>
<row>
<entry>const <link linkend="GnomeModuleInfo">GnomeModuleInfo</link> *<structfield>module_info</structfield></entry>
<entry>A <link linkend="GnomeModuleInfo">GnomeModuleInfo</link> structure detailing the required module.

</entry>
</row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="GnomeModuleInitHook">GnomeModuleInitHook ()</title>
<programlisting>void        (*GnomeModuleInitHook)          (const <link linkend="GnomeModuleInfo">GnomeModuleInfo</link> *mod_info);</programlisting>
<para>
A function that will be called to allow a module to do any pre-initialisation
it might need to do prior to having arguments parsed by the controlling parent
module (the parent will do the argument parsing for all modules in the
hierarchy).
</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>mod_info</parameter>&nbsp;:</entry>
<entry>The current module.


</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="GnomeModuleClassInitHook">GnomeModuleClassInitHook ()</title>
<programlisting>void        (*GnomeModuleClassInitHook)     (<link linkend="GnomeProgramClass">GnomeProgramClass</link> *klass,
                                             const <link linkend="GnomeModuleInfo">GnomeModuleInfo</link> *mod_info);</programlisting>
<para>
A function called to perform any class specific setup that is required by each
module.
</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>klass</parameter>&nbsp;:</entry>
<entry>The class of the parent module (which could be this module's class).
This will usually be <link linkend="GnomeProgramClass">GnomeProgramClass</link>.
</entry></row>
<row><entry align="right"><parameter>mod_info</parameter>&nbsp;:</entry>
<entry>The current module.


</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="GnomeModuleHook">GnomeModuleHook ()</title>
<programlisting>void        (*GnomeModuleHook)              (<link linkend="GnomeProgram">GnomeProgram</link> *program,
                                             <link linkend="GnomeModuleInfo">GnomeModuleInfo</link> *mod_info);</programlisting>
<para>
A function that is called to perform some intialisation in a module (which
could be either the main init function or the pre or post argument parsing
phase).
</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>program</parameter>&nbsp;:</entry>
<entry>The <link linkend="GnomeProgram">GnomeProgram</link> instance which is being initialised.
</entry></row>
<row><entry align="right"><parameter>mod_info</parameter>&nbsp;:</entry>
<entry>The current module's <link linkend="GnomeModuleInfo">GnomeModuleInfo</link> structure.


</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="gnome-program-init">gnome_program_init ()</title>
<programlisting><link linkend="GnomeProgram">GnomeProgram</link>* gnome_program_init            (const char *app_id,
                                             const char *app_version,
                                             const <link linkend="GnomeModuleInfo">GnomeModuleInfo</link> *module_info,
                                             int argc,
                                             char **argv,
                                             const char *first_property_name,
                                             ...);</programlisting>
<para>
Initialises the current GNOME libraries for use by the application.</para>
<para>
Every GNOME application will need to call this function (or
<link linkend="gnome-program-initv">gnome_program_initv</link>()) early in its lifetime to initialize the various GNOME
libraries in a consistent fashion. This function is very flexible in allowing
the user to specify which modules should be initialised and any special
paramter values that should be passed to these modules (along with processing
commandline options).
</para>
<para>
It loads the specified <parameter>module_info</parameter>, which is normally <link linkend="LIBGNOME-MODULE-CAPS">LIBGNOME_MODULE</link> or
<link linkend="LIBGNOMEUI-MODULE-CAPS">LIBGNOMEUI_MODULE</link> and pulls in all the dependencies.  Programs that are not
running in setuid or setgid mode will also load modules specified in the
<parameter class="option">--load-modules</parameter> and also in the <parameter
class="option">GNOME_MODULES</parameter> environment variable.
</para>
<para>
After setting up the module loading, this function then calls (in order)
<link linkend="gnome-program-preinit">gnome_program_preinit</link>(), <link linkend="gnome-program-parse-args">gnome_program_parse_args</link>() and
<link linkend="gnome-program-postinit">gnome_program_postinit</link>().
</para>
<para>The following example shows how one might initialise a typical program
using a popt table that is defined elsewhere (in other words, this is how to
remove the use of the deprecated <link linkend="gnome-init-with-popt-table">gnome_init_with_popt_table</link>() from code).
</para>
<example>
<title>Initializing a GNOME application</title>
<programlisting>
int main(int argc, char **argv) {
	GnomeProgram *my_app;
	
	/* We assume PACKAGE and VERSION are set the program name and version
	 * number respectively. Also, assume the 'options' is a global array of
	 * poptOptions.
	 */
	my_app = gnome_program_init(PACKAGE, VERSION, LIBGNOMEUI_MODULE,
	                            argc, argv, GNOME_PARAM_POPT_TABLE, options,
				    GNOME_PARAM_NONE);
	/* Now process any extra args, etc ... */
}
</programlisting>
</example><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>app_id</parameter>&nbsp;:</entry>
<entry> Application ID string.
</entry></row>
<row><entry align="right"><parameter>app_version</parameter>&nbsp;:</entry>
<entry> Application version string.
</entry></row>
<row><entry align="right"><parameter>module_info</parameter>&nbsp;:</entry>
<entry> The module to init with this program.
</entry></row>
<row><entry align="right"><parameter>argc</parameter>&nbsp;:</entry>
<entry> The number of commmand line arguments contained in <parameter>argv</parameter>.
</entry></row>
<row><entry align="right"><parameter>argv</parameter>&nbsp;:</entry>
<entry> A string array of command line arguments.
</entry></row>
<row><entry align="right"><parameter>first_property_name</parameter>&nbsp;:</entry>
<entry> The first item in a <literal>NULL</literal>-terminated list of attribute
name and value pairs (so this will be an attribute name or <literal>NULL</literal>).
</entry></row>
<row><entry align="right"><parameter>...</parameter>&nbsp;:</entry>
<entry> The continuation of a <literal>NULL</literal>-terminated list of attribute name/value
pairs.
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry> A <link linkend="GnomeProgram">GnomeProgram</link> instance representing the current application.
</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="gnome-program-initv">gnome_program_initv ()</title>
<programlisting><link linkend="GnomeProgram">GnomeProgram</link>* gnome_program_initv           (<link linkend="GType">GType</link> type,
                                             const char *app_id,
                                             const char *app_version,
                                             const <link linkend="GnomeModuleInfo">GnomeModuleInfo</link> *module_info,
                                             int argc,
                                             char **argv,
                                             const char *first_property_name,
                                             va_list args);</programlisting>
<para>
Provides a non-varargs form of <link linkend="gnome-program-init">gnome_program_init</link>(). Users will rarely need
to call this function directly.</para>
<para>

</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>type</parameter>&nbsp;:</entry>
<entry> The type of application to be initialized (usually
<link linkend="GNOME-TYPE-PROGRAM-CAPS">GNOME_TYPE_PROGRAM</link>).
</entry></row>
<row><entry align="right"><parameter>app_id</parameter>&nbsp;:</entry>
<entry> Application ID string.
</entry></row>
<row><entry align="right"><parameter>app_version</parameter>&nbsp;:</entry>
<entry> Application version string.
</entry></row>
<row><entry align="right"><parameter>module_info</parameter>&nbsp;:</entry>
<entry> The modules to init with the application.
</entry></row>
<row><entry align="right"><parameter>argc</parameter>&nbsp;:</entry>
<entry> The number of command line arguments contained in <parameter>argv</parameter>.
</entry></row>
<row><entry align="right"><parameter>argv</parameter>&nbsp;:</entry>
<entry> A string array of command line arguments.
</entry></row>
<row><entry align="right"><parameter>first_property_name</parameter>&nbsp;:</entry>
<entry> The first item in a <literal>NULL</literal>-terminated list of attribute
name/value.
</entry></row>
<row><entry align="right"><parameter>args</parameter>&nbsp;:</entry>
<entry> The remaining elements in the <literal>NULL</literal> terminated list (of which
<parameter>first_property_name</parameter> is the first element).
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry> A <link linkend="GnomeProgram">GnomeProgram</link> instance representing the current application.
</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="gnome-program-get">gnome_program_get ()</title>
<programlisting><link linkend="GnomeProgram">GnomeProgram</link>* gnome_program_get             (void);</programlisting>
<para>
Retrieves an object that stored information about the application's state.
Other functions assume this will always return a <link linkend="GnomeProgram">GnomeProgram</link> object which
(if not <literal>NULL</literal>) has already been initialized.</para>
<para>

</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry> The application's <link linkend="GnomeProgram">GnomeProgram</link> instance, or <literal>NULL</literal> if it does not
exist.
</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="gnome-program-get-human-readable-name">gnome_program_get_human_readable_name ()</title>
<programlisting>const char* gnome_program_get_human_readable_name
                                            (<link linkend="GnomeProgram">GnomeProgram</link> *program);</programlisting>
<para>
This function returns a pointer to a static string that the
application has provided as a human readable name. The app
should provide the name with the <link linkend="GNOME-PARAM-HUMAN-READABLE-NAME-CAPS">GNOME_PARAM_HUMAN_READABLE_NAME</link>
init argument. Returns <literal>NULL</literal> if no name was set.</para>
<para>

</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>program</parameter>&nbsp;:</entry>
<entry> The application object
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry> Application human-readable name string.
</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="gnome-program-get-app-id">gnome_program_get_app_id ()</title>
<programlisting>const char* gnome_program_get_app_id        (<link linkend="GnomeProgram">GnomeProgram</link> *program);</programlisting>
<para>
This function returns a pointer to a static string that the
application has provided as an identifier. This is not meant as a
human-readable identifier so much as a unique identifier for
programs and libraries.</para>
<para>

</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>program</parameter>&nbsp;:</entry>
<entry> The program object
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry> Application ID string.
</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="gnome-program-get-app-version">gnome_program_get_app_version ()</title>
<programlisting>const char* gnome_program_get_app_version   (<link linkend="GnomeProgram">GnomeProgram</link> *program);</programlisting>
<para>
This function returns a pointer to a static string that the
application has provided as a version number. This is not meant as a
human-readable identifier so much as a unique identifier for
programs and libraries.</para>
<para>

</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>program</parameter>&nbsp;:</entry>
<entry> The application object
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry> Application version string.
</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="gnome-program-locate-file">gnome_program_locate_file ()</title>
<programlisting><link linkend="gchar">gchar</link>*      gnome_program_locate_file       (<link linkend="GnomeProgram">GnomeProgram</link> *program,
                                             <link linkend="GnomeFileDomain">GnomeFileDomain</link> domain,
                                             const <link linkend="gchar">gchar</link> *file_name,
                                             <link linkend="gboolean">gboolean</link> only_if_exists,
                                             <link linkend="GSList">GSList</link> **ret_locations);</programlisting>
<para>
This function finds a full path to the <parameter>file_name</parameter> located in the specified
"domain". A domain is a name for a collection of related files.
For example, common domains are "libdir", "pixmap", and "config".
</para>
<para>
If <parameter>ret_locations</parameter> is <literal>NULL</literal>, only one pathname is returned. Otherwise,
alternative paths are returned in <parameter>ret_locations</parameter>.
</para>
<para>
User applications should store files in the GNOME_FILE_DOMAIN_APP_*
domains. However you MUST set the correct attributes for <link linkend="GnomeProgram">GnomeProgram</link> for
the APP specific prefixes (during the initialization part of the
application).
</para>
<para>
The <parameter>ret_locations</parameter> list and its contents should be freed by the caller, as
should the returned string.</para>
<para>

</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>program</parameter>&nbsp;:</entry>
<entry> A valid <link linkend="GnomeProgram">GnomeProgram</link> object or <literal>NULL</literal> (in which case the current
application is used).
</entry></row>
<row><entry align="right"><parameter>domain</parameter>&nbsp;:</entry>
<entry> A <link linkend="GnomeFileDomain">GnomeFileDomain</link>.
</entry></row>
<row><entry align="right"><parameter>file_name</parameter>&nbsp;:</entry>
<entry> A file name or path inside the 'domain' to find.
</entry></row>
<row><entry align="right"><parameter>only_if_exists</parameter>&nbsp;:</entry>
<entry> Only return a full pathname if the specified file
                 actually exists
</entry></row>
<row><entry align="right"><parameter>ret_locations</parameter>&nbsp;:</entry>
<entry> If this is not <literal>NULL</literal>, a list of all the possible locations
                of the file will be returned.
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry> The full path to the file (if it exists or only_if_exists is
         <literal>FALSE</literal>) or <literal>NULL</literal>.
</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="gnome-program-module-register">gnome_program_module_register ()</title>
<programlisting>void        gnome_program_module_register   (const <link linkend="GnomeModuleInfo">GnomeModuleInfo</link> *module_info);</programlisting>
<para>
This function is used to register a module to be initialized by the
GNOME library framework. The memory pointed to by <parameter>module_info</parameter> must be
valid during the whole application initialization process, and the module
described by <parameter>module_info</parameter> must only use the <parameter>module_info</parameter> pointer to
register itself.</para>
<para>

</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>module_info</parameter>&nbsp;:</entry>
<entry> A pointer to a GnomeModuleInfo structure describing the module
              to be initialized
</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="gnome-program-module-registered">gnome_program_module_registered ()</title>
<programlisting><link linkend="gboolean">gboolean</link>    gnome_program_module_registered (const <link linkend="GnomeModuleInfo">GnomeModuleInfo</link> *module_info);</programlisting>
<para>
This method checks to see whether a specific module has been
             initialized in the specified program.</para>
<para>

</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>module_info</parameter>&nbsp;:</entry>
<entry> A pointer to a GnomeModuleInfo structure describing the module
              to be queried
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry> A value indicating whether the specified module has been
         registered/initialized in the current program
</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="gnome-program-module-load">gnome_program_module_load ()</title>
<programlisting>const <link linkend="GnomeModuleInfo">GnomeModuleInfo</link>* gnome_program_module_load
                                            (const char *mod_name);</programlisting>
<para>
Loads a shared library that contains a
<link linkend="GnomeModuleInfo">GnomeModuleInfo</link> dynamic_module_info structure.</para>
<para>

</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>mod_name</parameter>&nbsp;:</entry>
<entry> module name
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry> The <link linkend="GnomeModuleInfo">GnomeModuleInfo</link> structure that was loaded, or <literal>NULL</literal> if the
module could not be loaded.
</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="gnome-program-install-property">gnome_program_install_property ()</title>
<programlisting><link linkend="guint">guint</link>       gnome_program_install_property  (<link linkend="GnomeProgramClass">GnomeProgramClass</link> *pclass,
                                             <link linkend="GObjectGetPropertyFunc">GObjectGetPropertyFunc</link> get_fn,
                                             <link linkend="GObjectSetPropertyFunc">GObjectSetPropertyFunc</link> set_fn,
                                             <link linkend="GParamSpec">GParamSpec</link> *pspec);</programlisting>
<para>
Install a collection of available properties, their default values and the
functions to set and retrieve these properties.
</para>
<para>
Normal applications will never need to call this function, it is mostly for
use by other platform library authors.</para>
<para>

</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>pclass</parameter>&nbsp;:</entry>
<entry> A <link linkend="GnomeProgramClass">GnomeProgramClass</link>.
</entry></row>
<row><entry align="right"><parameter>get_fn</parameter>&nbsp;:</entry>
<entry> A function to get property values.
</entry></row>
<row><entry align="right"><parameter>set_fn</parameter>&nbsp;:</entry>
<entry> A function to set property values.
</entry></row>
<row><entry align="right"><parameter>pspec</parameter>&nbsp;:</entry>
<entry> A collection of properties.
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry> The number of properties installed.
</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="gnome-program-preinit">gnome_program_preinit ()</title>
<programlisting><link linkend="poptContext">poptContext</link> gnome_program_preinit           (<link linkend="GnomeProgram">GnomeProgram</link> *program,
                                             const char *app_id,
                                             const char *app_version,
                                             int argc,
                                             char **argv);</programlisting>
<para>
This function performs the portion of application initialization that
needs to be done prior to command line argument parsing. The poptContext
returned can be used for <link linkend="getopt">getopt</link>()-style option processing.</para>
<para>

</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>program</parameter>&nbsp;:</entry>
<entry> Application object
</entry></row>
<row><entry align="right"><parameter>app_id</parameter>&nbsp;:</entry>
<entry> application ID string
</entry></row>
<row><entry align="right"><parameter>app_version</parameter>&nbsp;:</entry>
<entry> application version string
</entry></row>
<row><entry align="right"><parameter>argc</parameter>&nbsp;:</entry>
<entry> The number of commmand line arguments contained in 'argv'
</entry></row>
<row><entry align="right"><parameter>argv</parameter>&nbsp;:</entry>
<entry> A string array of command line arguments
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry> A poptContext representing the argument parsing state.
</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="gnome-program-parse-args">gnome_program_parse_args ()</title>
<programlisting>void        gnome_program_parse_args        (<link linkend="GnomeProgram">GnomeProgram</link> *program);</programlisting>
<para>
Parses the command line arguments for the application</para>
<para>

</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>program</parameter>&nbsp;:</entry>
<entry> Application object
</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="gnome-program-postinit">gnome_program_postinit ()</title>
<programlisting>void        gnome_program_postinit          (<link linkend="GnomeProgram">GnomeProgram</link> *program);</programlisting>
<para>
Called after <link linkend="gnome-program-parse-args">gnome_program_parse_args</link>(), this function
takes care of post-parse initialization and cleanup</para>
<para>

</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>program</parameter>&nbsp;:</entry>
<entry> Application object
</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="GNOME-PARAM-POPT-TABLE-CAPS">GNOME_PARAM_POPT_TABLE</title>
<programlisting>#define GNOME_PARAM_POPT_TABLE          "popt-table"
</programlisting>
<para>
This parameter contains the table of options to be passed to popt (write on
init only).
</para></refsect2>
<refsect2>
<title><anchor id="GNOME-PARAM-POPT-FLAGS-CAPS">GNOME_PARAM_POPT_FLAGS</title>
<programlisting>#define GNOME_PARAM_POPT_FLAGS          "popt-flags"
</programlisting>
<para>
This parameter contains the flags to use for popt (write on init only).
</para></refsect2>
<refsect2>
<title><anchor id="GNOME-PARAM-POPT-CONTEXT-CAPS">GNOME_PARAM_POPT_CONTEXT</title>
<programlisting>#define GNOME_PARAM_POPT_CONTEXT        "popt-context"
</programlisting>
<para>
This parameter contains the context pointer that <link linkend="GnomeProgram">GnomeProgram</link> is using for
popt parsing (readable).
</para></refsect2>
<refsect2>
<title><anchor id="GNOME-PARAM-CREATE-DIRECTORIES-CAPS">GNOME_PARAM_CREATE_DIRECTORIES</title>
<programlisting>#define GNOME_PARAM_CREATE_DIRECTORIES  "create-directories"
</programlisting>
<para>
This parameter contains <literal>TRUE</literal> if the standard GNOME directories should be
created on startup.
</para></refsect2>
<refsect2>
<title><anchor id="GNOME-PARAM-ENABLE-SOUND-CAPS">GNOME_PARAM_ENABLE_SOUND</title>
<programlisting>#define GNOME_PARAM_ENABLE_SOUND        "enable-sound"
</programlisting>
<para>
This parameter determines whether or not to enable sound on startup.
</para></refsect2>
<refsect2>
<title><anchor id="GNOME-PARAM-ESPEAKER-CAPS">GNOME_PARAM_ESPEAKER</title>
<programlisting>#define GNOME_PARAM_ESPEAKER            "espeaker"
</programlisting>
<para>
This parameter describes how to connect to esd.
</para></refsect2>
<refsect2>
<title><anchor id="GNOME-PARAM-APP-ID-CAPS">GNOME_PARAM_APP_ID</title>
<programlisting>#define GNOME_PARAM_APP_ID              "app-id"
</programlisting>
<para>
This parameter contains the ID string to use for the application (readable).
</para></refsect2>
<refsect2>
<title><anchor id="GNOME-PARAM-APP-VERSION-CAPS">GNOME_PARAM_APP_VERSION</title>
<programlisting>#define GNOME_PARAM_APP_VERSION         "app-version"
</programlisting>
<para>
This parameter contains the application version (readable).
</para></refsect2>
<refsect2>
<title><anchor id="GNOME-PARAM-GNOME-PREFIX-CAPS">GNOME_PARAM_GNOME_PREFIX</title>
<programlisting>#define GNOME_PARAM_GNOME_PREFIX        "gnome-prefix"
</programlisting>
<para>
This parameter contains the prefix where the main GNOME system is installed
(readable, writable on init only).
</para></refsect2>
<refsect2>
<title><anchor id="GNOME-PARAM-GNOME-SYSCONFDIR-CAPS">GNOME_PARAM_GNOME_SYSCONFDIR</title>
<programlisting>#define GNOME_PARAM_GNOME_SYSCONFDIR    "gnome-sysconfdir"
</programlisting>
<para>
This parameter contains the prefix where the GNOME configuration files
are installed (readable, writable on init only).
</para></refsect2>
<refsect2>
<title><anchor id="GNOME-PARAM-GNOME-DATADIR-CAPS">GNOME_PARAM_GNOME_DATADIR</title>
<programlisting>#define GNOME_PARAM_GNOME_DATADIR       "gnome-datadir"
</programlisting>
<para>
This parameter contains the prefix where the GNOME data files are installed
(readable, writable on init only).
</para></refsect2>
<refsect2>
<title><anchor id="GNOME-PARAM-GNOME-LIBDIR-CAPS">GNOME_PARAM_GNOME_LIBDIR</title>
<programlisting>#define GNOME_PARAM_GNOME_LIBDIR        "gnome-libdir"
</programlisting>
<para>
This parameter contains the prefix where the GNOME library files are installed
(readable, writable on init only).
</para></refsect2>
<refsect2>
<title><anchor id="GNOME-PARAM-APP-PREFIX-CAPS">GNOME_PARAM_APP_PREFIX</title>
<programlisting>#define GNOME_PARAM_APP_PREFIX          "app-prefix"
</programlisting>
<para>
This parameter contains the prefix where this application was installed
(read / write).
</para></refsect2>
<refsect2>
<title><anchor id="GNOME-PARAM-APP-SYSCONFDIR-CAPS">GNOME_PARAM_APP_SYSCONFDIR</title>
<programlisting>#define GNOME_PARAM_APP_SYSCONFDIR      "app-sysconfdir"
</programlisting>
<para>
This parameter contains the prefix where this application's configuration files
are installed (read / write).
</para></refsect2>
<refsect2>
<title><anchor id="GNOME-PARAM-APP-DATADIR-CAPS">GNOME_PARAM_APP_DATADIR</title>
<programlisting>#define GNOME_PARAM_APP_DATADIR         "app-datadir"
</programlisting>
<para>
This parameter contains the prefix where this application's data files are
installed (read / write).
</para></refsect2>
<refsect2>
<title><anchor id="GNOME-PARAM-APP-LIBDIR-CAPS">GNOME_PARAM_APP_LIBDIR</title>
<programlisting>#define GNOME_PARAM_APP_LIBDIR          "app-libdir"
</programlisting>
<para>
This parameter contains the prefix where this application's library files are
installed (read / write).
</para></refsect2>
<refsect2>
<title><anchor id="GNOME-PARAM-HUMAN-READABLE-NAME-CAPS">GNOME_PARAM_HUMAN_READABLE_NAME</title>
<programlisting>#define GNOME_PARAM_HUMAN_READABLE_NAME "human-readable-name"
</programlisting>
<para>
This parameter contains the human readable name of the application (readable).
</para></refsect2>
<refsect2>
<title><anchor id="GNOME-PARAM-GNOME-PATH-CAPS">GNOME_PARAM_GNOME_PATH</title>
<programlisting>#define GNOME_PARAM_GNOME_PATH          "gnome-path"
</programlisting>
<para>
This parameter contains the path in which to look for installed files (taken
from the GNOME2_PATH environment variable).
</para></refsect2>
<refsect2>
<title><anchor id="GNOME-PARAM-NONE-CAPS">GNOME_PARAM_NONE</title>
<programlisting>#define GNOME_PARAM_NONE                NULL
</programlisting>
<para>
Used to terminate a list of parameters and their values.
</para></refsect2>
<refsect2>
<title><anchor id="GNOME-PROGRAM-STANDARD-PROPERTIES-CAPS">GNOME_PROGRAM_STANDARD_PROPERTIES</title>
<programlisting>#define     GNOME_PROGRAM_STANDARD_PROPERTIES</programlisting>
<para>
When PREFIX, SYSCONFDIR, DATADIR and LIBDIR are defined during the build
process, this macro can be used to assign these values to
<link linkend="GNOME-PARAM-APP-PREFIX-CAPS">GNOME_PARAM_APP_PREFIX</link>, <link linkend="GNOME-PARAM-APP-SYSCONFDIR-CAPS">GNOME_PARAM_APP_SYSCONFDIR</link>, <link linkend="GNOME-PARAM-APP-DATADIR-CAPS">GNOME_PARAM_APP_DATADIR</link>
and <link linkend="GNOME-PARAM-APP-LIBDIR-CAPS">GNOME_PARAM_APP_LIBDIR</link> respectively so that the GNOME libraries
automatically know where to fetch application specific data from.  </para>

<para>
Every respectable GNOME application should set these variables and use
GNOME_PROGRAM_STANDARD_PROPERTIES in the call to <link linkend="gnome-program-init">gnome_program_init</link>().
</para></refsect2>

</refsect1>




</refentry>
