<refentry id="libgnome-gnome-util">
<refmeta>
<refentrytitle>gnome-util</refentrytitle>
<manvolnum>3</manvolnum>
<refmiscinfo>LIBGNOME Library</refmiscinfo>
</refmeta>

<refnamediv>
<refname>gnome-util</refname><refpurpose>Miscellaneous utility functions.</refpurpose>
</refnamediv>

<refsynopsisdiv><title>Synopsis</title>
<synopsis>

#include &lt;libgnome/libgnome.h&gt;


#define     <link linkend="gnome-is-program-in-path">gnome_is_program_in_path</link>        (program)
const char* <link linkend="g-extension-pointer">g_extension_pointer</link>             (const char *path);
#define     <link linkend="gnome-util-prepend-user-home">gnome_util_prepend_user_home</link>    (x)
#define     <link linkend="gnome-util-home-file">gnome_util_home_file</link>            (afile)
char*       <link linkend="gnome-util-user-shell">gnome_util_user_shell</link>           (void);
int         <link linkend="gnome-setenv">gnome_setenv</link>                    (const char *name,
                                             const char *value,
                                             <link linkend="gboolean">gboolean</link> overwrite);
void        <link linkend="gnome-unsetenv">gnome_unsetenv</link>                  (const char *name);
void        <link linkend="gnome-clearenv">gnome_clearenv</link>                  (void);

#define     <link linkend="g-concat-dir-and-file">g_concat_dir_and_file</link>           (dir,file)
#define     <link linkend="g-file-exists">g_file_exists</link>                   (filename)
#define     <link linkend="g-unix-error-string">g_unix_error_string</link>             (error_num)
#define     <link linkend="gnome-util-user-home">gnome_util_user_home</link>            ()
#define     <link linkend="g-copy-vector">g_copy_vector</link>                   (vec)
#define     <link linkend="gnome-libdir-file">gnome_libdir_file</link>               (f)
#define     <link linkend="gnome-datadir-file">gnome_datadir_file</link>              (f)
#define     <link linkend="gnome-sound-file">gnome_sound_file</link>                (f)
#define     <link linkend="gnome-pixmap-file">gnome_pixmap_file</link>               (f)
#define     <link linkend="gnome-config-file">gnome_config_file</link>               (f)
#define     <link linkend="gnome-unconditional-libdir-file">gnome_unconditional_libdir_file</link> (f)
#define     <link linkend="gnome-unconditional-datadir-file">gnome_unconditional_datadir_file</link>(f)
#define     <link linkend="gnome-unconditional-sound-file">gnome_unconditional_sound_file</link>  (f)
#define     <link linkend="gnome-unconditional-pixmap-file">gnome_unconditional_pixmap_file</link> (f)
#define     <link linkend="gnome-unconditional-config-file">gnome_unconditional_config_file</link> (f)
</synopsis>
</refsynopsisdiv>





<refsect1>
<title>Description</title>
<para>
The functions in this section provide some shortcuts to finding certain file
paths. There are also some functions for manipulating environment variables for
those systems that do not have <function><link linkend="getenv">getenv</link>()</function> and similar
functions.
</para>
<note>
   <para>
   Many of the function in here are now deprecated in favour of similar
   functions in glib. The preferred replacement function in those cases is
   indicated below.
   </para>
</note>
</refsect1>

<refsect1>
<title>Details</title>
<refsect2>
<title><anchor id="gnome-is-program-in-path">gnome_is_program_in_path()</title>
<programlisting>#define     gnome_is_program_in_path(program)</programlisting>
<warning>
<para>
<literal>gnome_is_program_in_path</literal> is deprecated and should not be used in newly-written code.
</para>
</warning>
<para>
Deprecated, use <link linkend="g-find-program-in-path">g_find_program_in_path</link></para>
<para>

</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>program</parameter>&nbsp;:</entry>
<entry> A program name.
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry> <literal>NULL</literal> if program is not on the path or a string 
allocated with <link linkend="g-malloc">g_malloc</link>() with the full path name of the program
found.
</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="g-extension-pointer">g_extension_pointer ()</title>
<programlisting>const char* g_extension_pointer             (const char *path);</programlisting>
<para>
Extracts the extension from the end of a filename (the part after the final
'.' in the filename).</para>
<para>

</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>path</parameter>&nbsp;:</entry>
<entry> A filename or file path.
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry> A pointer to the extension part of the filename, or a
pointer to the end of the string if the filename does not
have an extension.
</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="gnome-util-prepend-user-home">gnome_util_prepend_user_home()</title>
<programlisting>#define     gnome_util_prepend_user_home(x)</programlisting>
<para>
Prepends the home directory of the user to a filename.
</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>x</parameter>&nbsp;:</entry>
<entry>A relative filename in the user's home directory.
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry>A string containing <parameter>x</parameter> with the user's home directory path prepended.
The string should be freed with <link linkend="g-free">g_free</link>() when no longer required.


</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="gnome-util-home-file">gnome_util_home_file()</title>
<programlisting>#define     gnome_util_home_file(afile)</programlisting>
<para>
Similar to <link linkend="gnome-util-prepend-user-home">gnome_util_prepend_user_home</link>(), except that "/home/fred/.gnome2",
instead of just "/home/fred/" is put on the front.
</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>afile</parameter>&nbsp;:</entry>
<entry> A filename relative to the user's .gnome2 directory.
Returns: A string containing <parameter>afile</parameter> with the user's home directory path  and
"/.gnome2" prepended. The string should be freed with <link linkend="g-free">g_free</link>() when no longer
required.


</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="gnome-util-user-shell">gnome_util_user_shell ()</title>
<programlisting>char*       gnome_util_user_shell           (void);</programlisting>
<para>
Retrieves the user's preferred shell.</para>
<para>

</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry> A newly allocated string that is the path to the shell.
</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="gnome-setenv">gnome_setenv ()</title>
<programlisting>int         gnome_setenv                    (const char *name,
                                             const char *value,
                                             <link linkend="gboolean">gboolean</link> overwrite);</programlisting>
<para>
Adds "<parameter>name</parameter>=<parameter>value</parameter>" to the environment. Note that on systems without setenv,
this leaks memory so please do not use inside a loop or anything like that.
The semantics are the same as the glibc <link linkend="setenv">setenv</link>() (if <link linkend="setenv">setenv</link>() exists, it is
used).
</para>
<para>
If <parameter>overwrite</parameter> is <literal>FALSE</literal> and the variable already exists in the environment,
then <literal>0</literal> is returned and the value is not changed.</para>
<para>

</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>name</parameter>&nbsp;:</entry>
<entry> An environment variable name.
</entry></row>
<row><entry align="right"><parameter>value</parameter>&nbsp;:</entry>
<entry> The value to assign to the environment variable.
</entry></row>
<row><entry align="right"><parameter>overwrite</parameter>&nbsp;:</entry>
<entry> If <literal>TRUE</literal>, overwrite the existing <parameter>name</parameter> variable in the
environment.
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry> <literal>0</literal> on success, <literal>-1</literal> on error

</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="gnome-unsetenv">gnome_unsetenv ()</title>
<programlisting>void        gnome_unsetenv                  (const char *name);</programlisting>
<para>
Removes <parameter>name</parameter> from the environment.
In case there is no native implementation of unsetenv,
this could cause leaks depending on the implementation of
environment.</para>
<para>

</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>name</parameter>&nbsp;:</entry>
<entry> The environment variable to unset.
</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="gnome-clearenv">gnome_clearenv ()</title>
<programlisting>void        gnome_clearenv                  (void);</programlisting>
<para>
Clears out the environment completely.
In case there is no native implementation of clearenv,
this could cause leaks depending on the implementation
of environment.</para>
<para>

</para></refsect2>
<refsect2>
<title><anchor id="g-concat-dir-and-file">g_concat_dir_and_file()</title>
<programlisting>#define     g_concat_dir_and_file(dir,file)</programlisting>
<warning>
<para>
<literal>g_concat_dir_and_file</literal> is deprecated and should not be used in newly-written code.
</para>
</warning>
<para>
Programs should use <link linkend="g-build-filename">g_build_filename</link>() instead of this function.
</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>dir</parameter>&nbsp;:</entry>
<entry>Directory name.
</entry></row>
<row><entry align="right"><parameter>file</parameter>&nbsp;:</entry>
<entry>Filename.
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry>A newly allocated string that is the concatenation of <parameter>dir</parameter> and <parameter>file</parameter>,
with seperators appropriate for the filesystem automatically taken care of.


</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="g-file-exists">g_file_exists()</title>
<programlisting>#define     g_file_exists(filename)</programlisting>
<warning>
<para>
<literal>g_file_exists</literal> is deprecated and should not be used in newly-written code.
</para>
</warning>
<para>
Programs should use g_file_test(<parameter>filename</parameter>, G_FILE_TEST_EXISTS) instead of this
function.
</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>filename</parameter>&nbsp;:</entry>
<entry>Filename.
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry>Returns <literal>TRUE</literal> if <parameter>filename</parameter> exists, <literal>FALSE</literal> otherwise.


</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="g-unix-error-string">g_unix_error_string()</title>
<programlisting>#define     g_unix_error_string(error_num)</programlisting>
<warning>
<para>
<literal>g_unix_error_string</literal> is deprecated and should not be used in newly-written code.
</para>
</warning>
<para>
Programs should use <link linkend="g-strerror">g_strerror</link>() instead of this function. Also, note that the
returned string is only valid until the next call to <link linkend="g-strerror">g_strerror</link>() or
<link linkend="g-unix-error-string">g_unix_error_string</link>().
</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>error_num</parameter>&nbsp;:</entry>
<entry>A system error number (see C <link linkend="errno">errno</link> documentation for more info).
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry>A string describing the error code.


</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="gnome-util-user-home">gnome_util_user_home()</title>
<programlisting>#define     gnome_util_user_home()</programlisting>
<warning>
<para>
<literal>gnome_util_user_home</literal> is deprecated and should not be used in newly-written code.
</para>
</warning>
<para>
Programs should use <link linkend="g-get-home-dir">g_get_home_dir</link>() instead of this function.
</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry>The current user's home directory.


</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="g-copy-vector">g_copy_vector()</title>
<programlisting>#define     g_copy_vector(vec)</programlisting>
<warning>
<para>
<literal>g_copy_vector</literal> is deprecated and should not be used in newly-written code.
</para>
</warning>
<para>
Use <link linkend="g-strdupv">g_strdupv</link>() instead of this function.
</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>vec</parameter>&nbsp;:</entry>
<entry>An array of strings. <literal>NULL</literal> terminated.
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry>A copy of the <literal>NULL</literal>-terminated string array.


</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="gnome-libdir-file">gnome_libdir_file()</title>
<programlisting>#define     gnome_libdir_file(f)</programlisting>
<warning>
<para>
<literal>gnome_libdir_file</literal> is deprecated and should not be used in newly-written code.
</para>
</warning>
<para>
Programs should use <link linkend="gnome-program-locate-file">gnome_program_locate_file</link>() instead of this function.
</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>f</parameter>&nbsp;:</entry>
<entry>Filename.
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry>A full path to the file <parameter>f</parameter> that is stored in the system's GNOME
library directory (not the application's directory).


</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="gnome-datadir-file">gnome_datadir_file()</title>
<programlisting>#define     gnome_datadir_file(f)</programlisting>
<warning>
<para>
<literal>gnome_datadir_file</literal> is deprecated and should not be used in newly-written code.
</para>
</warning>
<para>
Programs should use <link linkend="gnome-program-locate-file">gnome_program_locate_file</link>() instead of this function.
</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>f</parameter>&nbsp;:</entry>
<entry>Filename.
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry>A full path to the file <parameter>f</parameter> that is stored in the system's GNOME
data directory (not the application's directory).


</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="gnome-sound-file">gnome_sound_file()</title>
<programlisting>#define     gnome_sound_file(f)</programlisting>
<warning>
<para>
<literal>gnome_sound_file</literal> is deprecated and should not be used in newly-written code.
</para>
</warning>
<para>
Programs should use <link linkend="gnome-program-locate-file">gnome_program_locate_file</link>() instead of this function.
</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>f</parameter>&nbsp;:</entry>
<entry>Filename.
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry>A full path to the file <parameter>f</parameter> that is stored in the system's GNOME
sound files directory (not the application's directory).


</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="gnome-pixmap-file">gnome_pixmap_file()</title>
<programlisting>#define     gnome_pixmap_file(f)</programlisting>
<warning>
<para>
<literal>gnome_pixmap_file</literal> is deprecated and should not be used in newly-written code.
</para>
</warning>
<para>
Programs should use <link linkend="gnome-program-locate-file">gnome_program_locate_file</link>() instead of this function.
</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>f</parameter>&nbsp;:</entry>
<entry>Filename.
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry>A full path to the file <parameter>f</parameter> that is stored in the system's GNOME
pixmap directory (not the application's directory).


</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="gnome-config-file">gnome_config_file()</title>
<programlisting>#define     gnome_config_file(f)</programlisting>
<warning>
<para>
<literal>gnome_config_file</literal> is deprecated and should not be used in newly-written code.
</para>
</warning>
<para>
Programs should use <link linkend="gnome-program-locate-file">gnome_program_locate_file</link>() instead of this function.
</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>f</parameter>&nbsp;:</entry>
<entry>Filename.
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry>A full path to the file <parameter>f</parameter> that is stored in the system's GNOME
config directory (not the application's directory).


</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="gnome-unconditional-libdir-file">gnome_unconditional_libdir_file()</title>
<programlisting>#define     gnome_unconditional_libdir_file(f)</programlisting>
<warning>
<para>
<literal>gnome_unconditional_libdir_file</literal> is deprecated and should not be used in newly-written code.
</para>
</warning>
<para>
Programs should use <link linkend="gnome-program-locate-file">gnome_program_locate_file</link>() instead of this function.
</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>f</parameter>&nbsp;:</entry>
<entry>Filename.
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry>A full path to the file <parameter>f</parameter> that is stored in the system's GNOME
library directory (not the application's directory).


</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="gnome-unconditional-datadir-file">gnome_unconditional_datadir_file()</title>
<programlisting>#define     gnome_unconditional_datadir_file(f)</programlisting>
<warning>
<para>
<literal>gnome_unconditional_datadir_file</literal> is deprecated and should not be used in newly-written code.
</para>
</warning>
<para>
Programs should use <link linkend="gnome-program-locate-file">gnome_program_locate_file</link>() instead of this function.
</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>f</parameter>&nbsp;:</entry>
<entry>Filename.
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry>A full path to the file <parameter>f</parameter> that is stored in the system's GNOME
data directory (not the application's directory).


</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="gnome-unconditional-sound-file">gnome_unconditional_sound_file()</title>
<programlisting>#define     gnome_unconditional_sound_file(f)</programlisting>
<warning>
<para>
<literal>gnome_unconditional_sound_file</literal> is deprecated and should not be used in newly-written code.
</para>
</warning>
<para>
Programs should use <link linkend="gnome-program-locate-file">gnome_program_locate_file</link>() instead of this function.
</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>f</parameter>&nbsp;:</entry>
<entry>Filename.
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry>A full path to the file <parameter>f</parameter> that is stored in the system's GNOME
sound files directory (not the application's directory).


</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="gnome-unconditional-pixmap-file">gnome_unconditional_pixmap_file()</title>
<programlisting>#define     gnome_unconditional_pixmap_file(f)</programlisting>
<warning>
<para>
<literal>gnome_unconditional_pixmap_file</literal> is deprecated and should not be used in newly-written code.
</para>
</warning>
<para>
Programs should use <link linkend="gnome-program-locate-file">gnome_program_locate_file</link>() instead of this function.
</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>f</parameter>&nbsp;:</entry>
<entry>Filename.
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry>A full path to the file <parameter>f</parameter> that is stored in the system's GNOME
pixmap directory (not the application's directory).


</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="gnome-unconditional-config-file">gnome_unconditional_config_file()</title>
<programlisting>#define     gnome_unconditional_config_file(f)</programlisting>
<warning>
<para>
<literal>gnome_unconditional_config_file</literal> is deprecated and should not be used in newly-written code.
</para>
</warning>
<para>
Programs should use <link linkend="gnome-program-locate-file">gnome_program_locate_file</link>() instead of this function.
</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>f</parameter>&nbsp;:</entry>
<entry>Filename.
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry>A full path to the file <parameter>f</parameter> that is stored in the system's GNOME
config directory (not the application's directory).


</entry></row>
</tbody></tgroup></informaltable></refsect2>

</refsect1>




</refentry>
