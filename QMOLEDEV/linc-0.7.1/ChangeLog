2002-12-28  Michael Meeks  <michael@ximian.com>

	* Version 0.7.1

2002-12-09  Michael Meeks  <michael@ximian.com>

	* src/linc-protocols.c (linc_protocol_get_sockaddr_unix): 
	finally - scuppered by my own undefined test in gcc ;-)

2002-12-09  Laurent Vivier  <Laurent.Vivier@bull.net>

	* src/linc-connection.c (LINC_IOV_MAX): re-order
	mess of compatibility evilness to move glibc's
	UIO_MAXIOV down, since this is something else on
	AIX (which has IOV_MAX).

2002-11-21  Dan Mills  <thunder@ximian.com>

	* configure.in: fix two typoes:  pango -> linc, and change spaces
	to a tab in the IFS assignment.

2002-11-21  Dan Mills  <thunder@ximian.com>

	* configure.in: fix gtk-doc version check.

2002-11-02  Michael Meeks  <michael@ximian.com>

	* test/test-linc.c
	(test_broken_cnx_handle_input): disconnect
	on fatal error.

2002-10-24  Michael Meeks  <michael@ximian.com>

	* src/linc.c (linc_object_unref): handle the
	  last ref sanely, so we don't deadlock doing
	  subsequent unrefs.

2002-10-18  Michael Meeks  <michael@ximian.com>

	* Version 0.7.0

2002-10-14  Marcus Brinkmann <Marcus.Brinkmann@ruhr-uni-bochum.de>

	* src/linc-protocols.c (linc_set_tmpdir), 
	(linc_protocol_get_sockaddr_unix),
	(linc_get_tmpdir): use dynamic allocation for
	linc_tmpdir to avoid PATH_MAX issues.

2002-09-24  Michael Meeks  <michael@ximian.com>

	* configure.in: bump to 0.7.0 - odd, and bigger.

	* src/linc-connection.c (linc_connection_read):
	don't be daft, don't emit a signal on fatal IO
	error at 0 read EOF, or we'll get into locking
	hell elsewhere.

2002-08-23  Elliot Lee  <sopwith@redhat.com>

	* src/linc-protocols.c (linc_protocol_get_sockaddr_ipv4): Don't
	turn on IPv6 name resolution when we are trying to resolve an IPv4
	host name - instead, turn it off. Also try to make use of all
	addresses that gethostbyname returns, not just the first. (Fixes a
	bug with connecting to a host that has both IPv6 and IPv4
	addresses.)

2002-08-23  Michael Meeks  <michael@ximian.com>

	* Version 0.5.3

2002-08-18  Havoc Pennington  <hp@pobox.com>

	* autogen.sh: hardcode aclocal-1.4/automake-1.4 so that users with
	both automake 1.6 and 1.4 installed get the right automake. Means
	compilation from CVS will now require the latest automake 1.4
	release, or manually creating symlinks called "automake-1.4" and
	"aclocal-1.4"

2002-08-05  Laurent Vivier  <Laurent.Vivier@bull.net>

	* include/linc/linc-connection.h: sanitize remote_info
	to gchar *

2002-08-05  Michael Meeks  <michael@ximian.com>

	* Version 0.5.2

2002-07-31  jacob berkman  <jacob@ximian.com>

	* src/linc-connection.c (LINC_IOV_MAX): bump to 1024 on os x, as
	the macros isn't defined unless we are defining KERNEL, which we
	aren't

2002-07-31  Michael Meeks  <michael@ximian.com>

	* test/test-linc.c (test_hosts_lookup): regression test.
	(verify_addr_is_loopback): split out.

	* configure.in: add inet_pton check.

	* src/linc-protocols.c (linc_protocol_get_sockaddr_ipv4):
	do a dotted quad type lookup first.
	(linc_protocol_get_sockaddr_ipv6): add inet_pton - raw IPv6
	addr translation 

	* src/linc-compat.h (INADDR_NONE): for broken systems.

2002-07-25  Yanko Kaneti <yaneti@declera.com>

	* test/test-linc.c: include "linc-compat.h" for ehm.. compatibilty. 

2002-07-24  Michael Meeks  <michael@ximian.com>

	* Version 0.5.1

2002-06-19  Michael Meeks  <michael@ximian.com>

	* test/test-linc.c (test_local_ipv4): upd.
	(test_hosts_lookup, test_host): impl

	* src/linc-protocols.c (linc_get_local_hostname):
	rename from get_local_hostname & make module public.

	* src/linc-server.c (linc_server_setup): upd. to use it.

	* src/linc-connection.c
	(linc_connection_initiate, linc_close_fd): handle EINTR
	on close.

	* src/linc-protocols.c (irda_find_device),
	(linc_protocol_destroy_addr),
	(linc_protocol_destroy_cnx): ditto.

	* src/linc-server.c (linc_server_dispose),
	(linc_server_accept_connection): ditto.

	* src/linc-protocols.c (irda_getaddrinfo):
	use g_strncpy not strcpy.

2002-06-18  Michael Meeks  <michael@ximian.com>

	* test/test-linc.c (test_local_ipv4): beef up &
	(test_local_ipv6): split out of
	(test_local): here.

	* src/linc-protocols.c
	(linc_protocol_get_sockaddr_ipv4): upd.
	(ipv4_addr_from_addr): impl.
	(LINC_RESOLV_CLEAR_IPV6): kill - horrible,
	vile, out of spec. hack.
	(linc_protocol_get_sockinfo_ipv46): upd.
	(linc_protocol_is_local_ipv46): re-re-write.

2002-06-17  Michael Meeks  <michael@ximian.com>

	* src/linc-protocols.c
	(linc_protocol_get_sockaddr_unix): beef up the
	length of the linc socket name slightly.
	(linc_protocol_is_local_ipv46): fix, so it works.
	(cleanup_sweep): remove.
	(linc_protocol_get_sockaddr_unix): hack cleanup
	out of here.

2002-06-12  Michael Meeks  <michael@ximian.com>

	* configure.in: bump version to 0.5.1

	* src/linc-connection.c
	(linc_connection_read): add paranoid assertion.

2002-06-12  Michael Meeks  <michael@ximian.com>

	* src/linc-protocols.c
	(linc_get_tmpdir): implement new API in
	accordance with release team approval for use
	in bonobo-activation, for it's locking / IOR
	exchange mechanism.

	* src/linc-connection.c
	(linc_connection_writev): split out
	(linc_connection_should_block): this.

2002-06-06  James M. Cape  <jcape@ignore-your.tv>

	* include/linc/linc-connection.h
	(LINC_CONNECTION_CLASS): fix typo in macro #84352

2002-05-27  Michael Meeks  <michael@ximian.com>

	* Version 0.5.0

2002-05-24  Michael Meeks  <michael@ximian.com>

	* src/linc.c (linc_init): do a plain g_type_init
	without adding the debug_flags, they're not
	helping us enough for the pain.

2002-05-21  Michael Meeks  <michael@ximian.com>

	* src/cleanup.c: make it work for the simple
	cases for now.

2002-05-21  Michael Meeks  <michael@ximian.com>

	* src/Makefile.am: add linc-cleanup-sockets.

	* src/cleanup.c: add.

	* src/linc-connection.c
	(linc_connection_writev): make status an int,
	so we return the enum more pleasantly.

2002-05-20  Michael Meeks  <michael@ximian.com>

	* Version 0.1.22

2002-05-17  Jacob Berkman  <jacob@ximian.com>

	* src/linc-protocols.c: check for RES_USE_INET6 for
	OS/X. define in6addr_any for broken Mac OS/X's.

2002-05-09  Michael Meeks  <michael@ximian.com>

	* src/linc-protocols.c: fix 'extern' static linc_protocols
	bug #80955 - thanks Jean-Pierre Dion

2002-04-18  Michael Meeks  <michael@ximian.com>

	* src/Makefile.am: add G_DISABLE_DEPRECATED

2002-04-15  Michael Meeks  <michael@ximian.com>

	* Version 0.1.21

2002-04-15  Michael Meeks  <michael@ximian.com>

	* src/linc-private.h: fix prototypes,
	s/socklen_t/LincSockLen/

2002-04-11  Michael Meeks  <michael@ximian.com>

	* test/Makefile.am (test_linc_LDADD):
	add various libs.

2002-04-10  Michael Meeks  <michael@ximian.com>

	* src/*,
	* docs/*: update

2002-04-09  Michael Meeks  <michael@ximian.com>

	* src/linc-private.h: hoist SSL includes,
	(thanks to Colin Campbell).

2002-04-08  Michael Meeks  <michael@ximian.com>

	* src/linc-protocols.[ch],
	* src/linc-server.c (linc_server_setup): use
	LincSockLen instead of socklen_t so that we can
	build on systems without it, (thanks to Garth Pearce).

	* src/linc-compat.h: hide the evil compat mess into here.

	* src/linc-server.c: include linc-hacks.h

	* test/test-linc.c
	(test_blocking_cnx_handle_input),
	(test_blocking_cnx_handle_input): use
	guint32 not glong.

	* configure.in: use --with-openssl #77962

2002-04-08  Michael Meeks  <michael@ximian.com>

	* src/linc-protocols.c (cleanup_sweep): disable,
	it seems that this is a source of evil lockups;
	really we need to do this in a non-blocking way,
	and idly unlink things that look bad.

2002-04-02  Michael Meeks  <michael@ximian.com>

	* src/linc-protocols.c (cleanup_sweep): impl to
	solve the leftover unix domain socket problem.
	(linc_protocol_get_sockaddr_unix): do the sweep.

2002-03-21  Michael Meeks  <michael@ximian.com>

	* Version 0.1.20

2002-03-21  Michael Meeks  <michael@ximian.com>

	* src/linc-server.c (linc_server_handle_io): fix
	warning spew.

	* src/linc-protocols.c (linc_protocol_destroy_addr):
	check family for AF_UNIX.

2002-03-20  Gregory Leblanc  <gleblanc@linuxweasel.com>

	* configure.in: Adding missing AC_SUBST
	* linc.spec.in: rewrite

2002-03-20  Michael Meeks  <michael@ximian.com>

	* src/linc-protocols.c (linc_protocol_destroy_cnx): impl.
	(linc_protocol_destroy_saddr): impl with nasty hacks for UDS.

	* src/linc-server.c (linc_server_dispose): use it.
	(linc_server_setup): on error unlink the UDS & fix fd
	leak.

2002-03-20  Michael Meeks  <michael@ximian.com>

	* src/linc-server.c (linc_server_accept_connection):
	always initialize the connection - thanks again Havoc.

	* src/linc-connection.c (linc_connection_initiate):
	fix fd leak - thanks Havoc.

2002-03-04  Mark McLoughlin  <mark@skynet.ie>

	* configure.in: Version 0.1.19

2002-02-26  Michael Meeks  <michael@ximian.com>

	* src/linc-connection.c
	(linc_connection_class_state_changed): only emit
	'broken' when the state actually changes - ie. once.

2002-02-17  Michael Meeks  <michael@ximian.com>

	* src/linc-server.c (linc_server_accept_connection):
	close the fd in case linc_connection_from_fd might
	fail some day.

2002-02-11  Mark McLoughlin  <mark@skynet.ie>

	* configure.in: Version 0.1.18

2002-02-11  Michael Meeks  <michael@ximian.com>

	* configure.in: update OpenSSL check, and default to no
	OpenSSL checking - OpenSSL has a pants license, do not
	use it.

2002-02-11  Mark McLoughlin  <mark@skynet.ie>

	* configure.in: Version 0.1.17

2002-02-06  Michael Meeks  <michael@ximian.com>

	* src/linc-protocols.c: define NI_MAXHOST to
	MAXHOSTNAMELEN if we just can't find it, include
	sys/param.h explicitely for that, define NI_MAXSERV
	to 64 in case we can't get that either.

2002-02-05  Sebastian Wilhelmi  <wilhelmi@ira.uka.de>

	* src/linc-connection.c (write_data): Do not use
	WRITEV_IOVEC_LIMIT as the maximal iovec count, but determine it by
	some architecture dependent preprocessor constants. This prevents
	using the fallback implementation of writev. (if the count is too
	big, the kernel returns an error and libc might provide a fallback
	by alloca'ing the necessary mem, copying the iovec's content there
	and writing that out, which in turn might produce a segmentation
	fault for lots of data on a small stacks, like in multithreaded
	programs)

	* configure.in, acconfig.h: Removed the test for
	WRITEV_IOVEC_LIMIT form configure.in and WRITEV_IOVEC_LIMIT from
	acconfig.h.

2002-01-28  Mark McLoughlin  <mark@skynet.ie>

	* configure.in: Version 0.1.16

2002-01-21  Michael Meeks  <michael@ximian.com>

	* src/linc-connection.c (write_data): don't signal
	and return the no. of bytes written.
	(linc_connection_writev): map to the return enum.
	(linc_connection_io_handler): move the queue signal
	here after we've updated the queue list.
	(write_data): stop running over the end of the
	array.

2002-01-18  Mark McLoughlin  <mark@skynet.ie>

	* src/linc-connection.c: (linc_connection_read): disconnect
	on receipt of EOF.

	* test/test-linc.c: (broken_cb), (test_server_create_connection),
	(create_client), (test_broken_cnx_handle_input),
	(test_broken_cnx_class_init), (test_get_broken_cnx_type),
	(test_broken), (test_blocking_cnx_handle_input),
	(test_blocking_cnx_class_init), (test_get_blocking_cnx_type),
	(test_blocking): re-jig the 'broken' test to test this code
	path.

2002-01-17  Michael Meeks  <michael@ximian.com>

	* Version 0.1.15

	* src/linc-protocols.c: remove debug.

	* Version 0.1.14
	
2002-01-17  Michael Meeks  <michael@ximian.com>

	* configure.in: bump version to 0.1.14 for ORBit2
	dependency / build reasons.

	* test/test-linc.c (test_protos): impl.
	(main): call it.

2002-01-16  Michael Meeks  <michael@ximian.com>

	* src/linc-protocols.c (get_local_hostname): impl. so
	we can call it lots.
	(linc_protocol_get_sockinfo_ipv46): upd.
	(linc_protocol_get_sockinfo_unix): upd.
	(linc_protocol_is_local): impl.
	(linc_protocol_unix_is_local): impl.
	(linc_protocol_is_local_ipv46): impl.

	* src/linc-server.c (linc_server_accept_connection):
	check for remote connections - if in local only mode,
	using new is_local API.

	* include/linc/linc-protocol.h: add is_local.

	* include/linc/linc-types.h: add local only flag.

2002-01-17  Laszlo Peter  <laca@ireland.sun.com>

	* src/linc-connection.c (write_data): fix writev loop conditions
	when nvecs > WRITEV_IOVEC_LIMIT.

2002-01-10  Roland Juelich <rj@atecom.com>

	* src/linc-source.c (linc_io_add_watch): create our own
	LincWatch and pass the channel on to 
	(linc_source_create_watch): here, store the channel for
	the callback.

	* src/linc-private.h: store GIOChannel in watch for use
	in source dispatcher.

2002-01-09  Michael Meeks  <michael@ximian.com>

	* Version 0.1.13

2002-01-04  Dave Camp  <dave@ximian.com>

	* src/linc-connection.c (linc_connection_class_init): Use the
	'blocking' struct member for the blocking signal rather than the
	'broken' member.

2002-01-04  Michael Meeks  <michael@ximian.com>

	* src/linc-source.c (linc_io_remove_watch): clobber
	the source so we can't get any events on the source -
	even if glib does strange things.

	* src/linc-server.c (linc_server_dispose): re-order
	the watch removal process.

	* test/test-linc.c (test_blocking): release the
	write options.

	* src/linc-source.c (linc_source_finalize): impl.
	for debug.

2002-01-04  Michael Meeks  <michael@ximian.com>

	* src/linc-connection.c (linc_connection_io_handler):
	allow handling both input and output in the same poll,
	to stop re-enterancy hell in the ORB.
	(queue_signal): special case a '0' byte max_buffer ==
	no maximum, thanks to Dave Camp.

2002-01-03  Michael Meeks  <michael@ximian.com>

	* Version 0.1.12

2002-01-03  Michael Meeks  <michael@ximian.com>

	* src/linc-server.c (linc_server_setup): set
	FD_CLOEXEC - on the server's connection.

2002-01-03  Laszlo Peter  <laca@ireland.sun.com>

	* configure.in: add check for -lresolv

2001-12-31  Michael Meeks  <michael@ximian.com>

	* src/linc-connection.c
	(linc_connection_io_handler): continue writing the queue
	if we didn't flush it all (doh).

	* test/test-linc.c (test_blocking),
	(blocking_cb, knobble_watch): impl.
	(test_server_create_connection): impl.
	(test_cnx_handle_input): impl.

	* src/linc-connection.c: (queue_signal): add ref. guards.
	& signal half full buffer as specified.

	* src/linc-server.c, src/linc-source.c,
	* src/linc-connection.c: move private struct defs into

	* src/linc-private.h: here.

	* test/Makefile.am: upd. include path.

	* test/test-linc.c (create_server),
	(create_client, test_broken): split out of (main).

2001-12-31  Michael Meeks  <michael@ximian.com>

	* configure.in: bump version to 0.1.12

2001-12-28  Michael Meeks  <michael@ximian.com>

	* src/linc-connection.c (calc_size): split out of
	(queue_flattened): here.

	* include/linc/linc-server.h,
	* include/linc/linc-connection.h
	(LINC_IS_CONNECTION): re-write macros, slower,
	but functional.

	* src/linc-connection.c (linc_connection_class_init):
	add the 'blocking' signal.
	(queue_signal): impl.
	(linc_connection_class_state_changed): free the queue
	on disconnect.
	(linc_connection_io_handler): do an unchecked class
	cast for speed.

2001-12-27  Michael Meeks  <michael@ximian.com>

	* src/linc-connection.c (linc_connection_write):
	re-express in terms of writev - this should always have
	been so.
	(linc_connection_writev): fix iov_base arithemetic.
	merge in the SSL code from writev.
	(queue_flattened, queue_free): impl.
	(linc_connection_dispose): release the queue.
	(write_data): split this out of
	(linc_connection_writev): here & upd to handle queue.
	(linc_connection_connected): rename to
	(linc_connection_io_handler): this.
	(linc_source_add): upd.
	(queued_write_free): impl.
	(linc_connection_writev): don't belt round a
	non-blocking loop on EAGAIN even if we block.

2001-12-19  Michael Meeks  <michael@ximian.com>

	* src/linc-server.c (linc_server_setup): upd.

	* src/linc-connection.c: kill wasteful GIOChannel.
	(linc_source_add): upd.
	(linc_connection_dispose): upd.
	(linc_connection_from_fd): upd.
	(linc_source_unwatch_out): kill.
	(linc_connection_connected): upd.
	(linc_connection_class_state_changed): upd.

	* src/linc-source.c: add.
	(linc_io_add_watch_fd): impl.
	(linc_watch_set_condition): impl.

	* src/linc.c (linc_io_add_watch): move this

2001-12-14  Roland Juelich <rj@atecom.com>

	* src/linc-server.c (linc_server_setup): if we are
	passed local_host_info, then use it instead.

2001-12-14  Michael Meeks  <michael@ximian.com>

	* src/linc-protocols.c: include netdb.h if we're
	missing some NI_ defines.

2001-12-14  David Haverkamp  <dahaverk@rockwellcollins.com>

	* src/linc-protocols.c: include arpa/nameser.h before
	resolv.h for Solaris systems.

2001-12-11  Michael Meeks  <michael@ximian.com>

	* Version 0.1.11

2001-12-08  Michael Meeks  <michael@ximian.com>

	* src/linc-connection.c (linc_connection_write),
	(linc_connection_writev): handle the connection
	dying in mid-write, it seems EAGAIN gets fired to
	distinguish from a 0 length write == an error conditon (?)

2001-12-07  Michael Meeks  <michael@ximian.com>

	* src/linc-connection.c
	(linc_connection_class_state_changed): change status
	early so we're consistant by the time 'broken' is
	emitted.

2001-12-06  Laszlo Peter  <laca@ireland.sun.com>

	* configure.in: Fix detection of WRITEV_IOVEC_LIMIT.

2001-12-05  Kristian Rietveld  <kris@gtk.org>

	* src/linc-protocols.c: Move down resolve.h for better
	FreeBSD build.

2001-12-01  Theo van Klaveren  <t.vanklaveren@student.utwente.nl>

	* src/linc-protocols.c: Add <netinet/in.h> to includes.
	Fixes build on FreeBSD.

2001-11-26  Michael Meeks  <michael@ximian.com>

	* Version 0.1.10

2001-11-23  Michael Meeks  <michael@ximian.com>

	* src/linc.c (linc_io_add_watch): fixup debugging.

2001-11-25  Havoc Pennington  <hp@redhat.com>

	* src/Makefile.am (liblinc_la_SOURCES): add linc-debug.h

2001-11-22  Michael Meeks  <michael@ximian.com>

	* src/linc.c (linc_io_add_watch): remove
	g_warning debug; doh.

2001-11-22  Michael Meeks  <michael@ximian.com>

	* src/linc-connection.c (linc_source_unwatch_out): fix
	brainless not listening for input.

	* src/linc.c (linc_io_add_watch): beef up
	watch debug.

	* src/linc-connection.c (linc_source_add): impl.
	(linc_connection_class_state_changed),
	(linc_source_unwatch_out): use it.

	* src/linc-private.h (LINC_IN_CONDS,
	LINC_ERR_CONDS): move here.

	* src/linc-connection.c: update IO conditions.

	* src/linc-server.c
	(linc_server_handle_io): accept G_IO_PRI
	(linc_server_handle): kill, not used.
	(linc_server_setup): take note of G_IO_PRI

	* src/linc-protocols.c
	(linc_protocol_get_sockaddr_unix): make the UDS name
	more random; include the pid when debugging.

	* src/linc-connection.c: instrument more.

	* src/linc-server.c (linc_server_setup): convert
	to new debug framework.

	* src/linc-debug.h: add.

2001-11-22  Michael Meeks  <michael@ximian.com>

	* src/linc-connection.c
	(linc_connection_connected): split out re-connect
	(linc_source_unwatch_out): this to clarify.
	add dprintf debugging throught.

2001-11-19  Michael Meeks  <michael@ximian.com>

	* src/linc.c (linc_object_get_mutex): 
	(linc_init): setup the lifecycle mutex.
	(linc_object_ref, linc_main_get_loop),
	(linc_object_unref): impl - sucky locking
	for now.

	* src/linc-server.c (linc_server_finalize),
	(linc_server_init): manage private structure.
	Privatize fd, mutex, tag, connections

	* src/linc-connection.c (linc_connection_finalize),
	(linc_connection_init): manage private structure.
	Privatize fd, tag, gioc, ssl.
	(linc_connection_initiate): upd.

2001-11-19  Michael Meeks  <michael@ximian.com>

	* src/linc-server.c (linc_server_accept_connection): 
	kill bogus get_sockinfo - we don't need this
	information whatsoever.

	* src/linc-connection.c (linc_connection_from_fd):
	this method has at least 2 totaly bogus arguments,
	host, service - the joys of frozen APIs.

	* src/linc-connection.c
	(linc_connection_dispose): split
	(linc_connection_finalize): impl.
	(linc_connection_class_init): upd.

2001-11-18  Miles Lane  <miles@megapathdsl.net>

	* include/linc/linc-types.h: replace include of 
	gobject/gobject.h with glib-object.h, due to a 
	change in gobject/gobject.h that forces an #error 
	for all direct includes.
	This checkin was approved by Havoc.

2001-11-16  Michael Meeks  <michael@ximian.com>

	* configure.in: bump ver to 0.1.9

	* src/linc-server.c (linc_server_accept_connection):
	keep track of the connections we accept - hopefully if
	we re-use them, there won't be many.
	(linc_server_dispose): protect vs. double dispose &
	unref. connections.
	(linc_server_finalize): impl.
	(linc_server_class_init): hook up.

	* src/linc-connection.c (linc_source_remove): remove
	bogus self unref.
	(linc_connection_dispose),
	(linc_connection_class_state_changed): upd.

2001-11-15  Michael Meeks  <michael@ximian.com>

	* src/linc-connection.c (linc_connection_from_fd): assign
	the protocol.

	* src/linc-server.c (linc_server_dispose): protect vs.
	double dispose's

2001-11-13  jacob berkman  <jacob@ximian.com>

	* docs/Makefile.am (dist-hook): depend on docs being built

	* docs/linc-sections.txt:
	* docs/linc.types: these files are needed to dist

2001-11-13  Michael Meeks  <michael@ximian.com>

	* docs/Makefile.am (IGNORE_HFILES): add config.h, acconfig.h

	* src/linc-server.c (linc_server_handle): privatize,
	unused & redundant.

	* docs/tmpl/linc-types.sgml: document LINC_MUTEX_LOCK /
	UNLOCK.

	* src/linc-protocols.c (linc_set_tmpdir): fix docs.

	* src/linc.c (linc_io_add_watch, linc_io_remove_watch),
	(linc_main_iteration, linc_main_pending, linc_mutex_new),
	(linc_main_loop_run): document.

2001-11-13  Michael Meeks  <michael@ximian.com>

	* docs/linc-sections.txt: remove config, acconfig,
	linc-config, linc-private sections.

2001-11-12 John Fleck <jfleck@inkstain.net>

	* added docs/Makefile.am
	        docs/linc-docs.sgml
		docs/tmpl/acconfig.sgml, linc-connection.sgml,
	        linc-server.sgml, linc-unused.sgml, config.sgml,
	        linc-private.sgml, linc.sgml, linc-config.sgml,
	        linc-protocol.sgml, linc-types.sgml
        modified ./Makefile.am, configure.in
        add gtk-doc build system

2001-11-12  Michael Meeks  <michael@ximian.com>

	* src/linc-server.c (linc_server_accept_connection): 
	set O_NONBLOCK on connections we accept; also set
	FD_CLOEXEC - doh.

2001-11-12  Michael Meeks  <michael@ximian.com>

	* src/linc-connection.c (linc_connection_read),
	(linc_connection_write, linc_connection_writev),
	catch and warn on EBADF.

2001-11-12  Michael Meeks  <michael@ximian.com>

	* configure.in: bump version to 0.1.8

	* src/linc-connection.c
	(linc_connection_read): set fatal error on
	0 length reads, don't re-enter foolishly in
	various places, return bytes_read on EAGAIN,
	don't loop re-entering while waiting for
	connected.

2001-11-08  Michael Meeks  <michael@ximian.com>

	* Version 0.1.7

2001-11-08  Michael Meeks  <michael@ximian.com>

	* src/linc.c (linc_io_add_watch): setup sources as
	recursive sources - so we can recurse !
	(linc_main_iteration, linc_io_remove_watch),
	(linc_io_add_watch): add conditional watch debugging.

2001-11-08  Michael Meeks  <michael@ximian.com>

	* src/linc-connection.c (linc_connection_writev): remove
	'register' optimization :-) fix SSL path, make the code
	legible, handle EINTR, don't skip partialy written
	iovecs in a totaly bogus way.
	(linc_connection_write): handle EINTR.
	(linc_connection_read): rename 'written' 'bytes_read'
	Document all methods.

2001-11-06  Michael Meeks  <michael@ximian.com>

	* src/linc.c (linc_init): init with G_TYPE_DEBUG_OBJECTS.

2001-10-30  Mark McLoughlin  <mark@skynet.ie>

	* configure.in: version 0.1.6.

2001-10-29  Michael Meeks  <michael@ximian.com>

	* configure.in: require glib >= 1.3.10

2001-10-26  Michael Meeks  <michael@ximian.com>

	* src/linc.c (linc_mutex_new): flag that we have been
	called.
	(linc_set_threaded): add protection for people setting
	the threaded-ness late.

2001-10-24  Ross Golder  <rossg@durban.golder.org>

	* Makefile.am (EXTRA_DIST): Added spec file, and removed
	floating tab

2001-10-25  Michael Meeks  <michael@ximian.com>

	* AUTHORS: update,

	* *.[ch]: Add copyright headers.

2001-10-24  Michael Meeks  <michael@ximian.com>

	* src/linc-connection.c (linc_connection_class_init): 
	fix ref counting on parent type.

2001-10-24  Michael Meeks  <michael@ximian.com>

	* src/linc.c (linc_init): fix brainlessness.

2001-10-24  Michael Meeks  <michael@ximian.com>

	* src/linc.c (linc_init): upd.
	(linc_set_threaded): impl.
	(linc_mutex_new): only return a mutex if linc_threaded
	is TRUE, _and_ g_thread_supported.

2001-10-18  Michael Meeks  <michael@ximian.com>

	* src/linc-connection.c (linc_connection_connected):
	simplify flow, ignore handle_input's return value,
	always return TRUE, we remove ourself from both main
	contexts elsewhere.

2001-10-16  Mark McLoughlin <mark@skynet.ie>

	* Makefile.am (EXTRA_DIST): kill linc-config.in,
	linc.pc.in, linc.spec and linc.spec.in. Add HACKING
	and MAINTAINERS.

2001-10-10  Abel Cheung  <maddog@linux.org.hk>

	* linc-config.in(cflags): move headers to subdir

	* linc.spec.in(%files): ditto, for spec file.

2001-10-09  Havoc Pennington  <hp@redhat.com>

	* linc.pc.in (Cflags): headers in a subdir

	* include/linc/Makefile.am (lincincludedir): put headers in a
	subdir

2001-09-26  Mark McLoughlin <mark@skynet.ie>

	* configure.in: add --enable-compile-warnings option.

	* src/Makefile.am: use $(WARN_CFLAGS)

	* src/linc-protocols.c
	(linc_protocol_get_sockinfo_ipv6): initialise host.
	include linc-private.h.

2001-09-25  Mark McLoughlin <mark@skynet.ie>

	* Version 0.1.5.

2001-09-24  Mark McLoughlin <mark@skynet.ie>

	* linc/configure.in: clean up libtool versioning. Use
	pkg-config to check for libs. Kill unused vprintf and
	alloca check.

	* linc.pc.in, linc.spec.in: update.

	* linc/src/Makefile.am: update and include libtool 
	version-info.

2001-09-20  Mark McLoughlin <mark@skynet.ie>

	Patch from Frank Belew <frb@ximian.com>.

	* src/linc-protocols.c (static_linc_protocols):
	don't use 'designated initializers' style of initialization.
	Allowed by C99, but Sun's Forte compiler does't allow it.

2001-09-20  Mark McLoughlin <mark@skynet.ie>

	* src/linc-connection.c
	(linc_connection_real_state_changed): rename to...
	(linc_connection_class_state_changed): document and tidy.
	(linc_connection_from_fd): ditto.
	(linc_connection_initiate): ditto.
	(linc_connection_state_changed): ditto.
	(linc_connection_read): return 0 if passed 0 or if the
	connection has been closed.

2001-09-18  Jens Finke <jens@gnome.org>

	* linc.spec.in: New file.
	
	* Makefile.am (EXTRA_DIST): Added linc.spec and linc.spec.in.

	* configure.in (AC_OUTPUT): Create linc.spec.

2001-09-13  Michael Meeks  <michael@ximian.com>

	* src/linc-protocols.c (linc_protocol_get_sockinfo_ipv46):
	use guint instead of in_port_t to fix the issue differently.

	* configure.in: remove bogus in_port_t define.

2001-09-12 Dirk-Jan C. Binnema <djcb@djcbsoftware.nl>

	* configure.in; compile fix: define in_port_t if it isn't

2001-09-11  Mark McLoughlin <mark@skynet.ie>

	* src/linc-protocol.c: fix typo.

2001-09-11  Mark McLoughlin <mark@skynet.ie>

	* include/linc/linc-protocol.h,
	  src/linc-protocols.c
	(LINCProtocolGetAddrInfoFunc, LINCProtocolGetNameInfoFunc):
	killed.
	(LINCProtocolGetSockInfoFunc): added.
	(LINCProtocolInfo): added get_sockinfo. killed getaddrinfo and
	getnameinfo.
	(linc_getaddrinfo, linc_getnameinfo, sys_getaddrinfo,
	 sys_getnameinfo): killed.
	(tcp_setup): renamed to linc_protocol_tcp_setup.
	(af_unix_destroy): renamed to linc_protocol_unix_destroy.
	(protocol_ents): renamed to static_linc_protocols.
	(linc_protocol_get_sockinfo_ipv46, 
	 linc_protocol_get_sockinfo_ipv4,
	 linc_protocol_get_sockinfo_ipv6,
	 linc_protocol_get_sockinfo_unix,
	 linc_protocol_get_sockinfo_irda, linc_protocol_get_sockinfo):
	implemented.
	Finished documenting.
	NOTE: get_sockinfo_irda and get_sockaddr_irda are not working.

	* src/linc-private.h: added linc_protocol_get_sockinfo.

	* src/linc-server.c(linc_server_accept_connection): use
	get_sockinfo instead of getnameinfo.
	(linc_server_setup): ditto.

	* include/linc/linc-connection.h,
	  src/linc-connection.c(linc_connection_from_fd):
	don't dup remote_host_info and remote_serv_info.

2001-09-10  Mark McLoughlin <mark@skynet.ie>

	* linc/src/linc-protocols.c: 
	(linc_protocol_get_sockaddr_ipv4): set resolver options.
	(linc_protocol_get_sockaddr_ipv6): impl.
	(linc_protocol_get_sockaddr_unix): kill silly saddr_len bug.
	(irda_getaddrinfo): use new IRDA_PREFIX_LEN define.
	Move protocol_ents definition to bottom and kill prototypes. 
	Api-doc most functions.

2001-09-09  Michael Meeks  <michael@ximian.com>

	* src/linc-server.c (linc_server_setup): remove
	bogus g_free (saddr)

2001-09-07  Mark McLoughlin <mark@skynet.ie>

	* acconfig.h, configure.in: add check for
	sockaddr's sa_len member.

	* src/linc-protocols.c(linc_protocol_get_sockaddr,
	linc_protocol_get_sockaddr_ipv4,
	linc_protocol_get_sockaddr_ipv6,
	linc_protocol_get_sockaddr_unix,
	linc_protocol_get_sockaddr_irda): impl. get_sockaddr
	will replace getaddrinfo soon. getaddrinfo is a waste
	of time - we don't need most of the data it returns,
	and it is non-portable for unix sockets, ipv6 and irda.
	Indeed older unices don't even have an implementation for 
	ipv4.
	*NOTE*: irda and ipv6 are not working with this yet. But
	        I doubt anyone is actually using these...

	* src/linc-private.h: add linc_protocol_get_sockaddr.

	* src/linc-connection.c(linc_connection_initiate): use
	linc_protocol_get_sockaddr instead of linc_getaddrinfo.

	* src/linc-server.c(linc_server_setup): ditto.

	* include/linc/linc-types.h: moved LINCProtocolInfo here.

	* include/linc/linc-protocol.h
	(LINCProtocolInfo): added get_sockname. Impl typedefs
	for functions types.

2001-09-07  Mark McLoughlin <mark@skynet.ie>

	* src/linc-protocols.c: Warning killers - include string.h
	and don't prototype IRDA functions if IRDA defines not
	available.

2001-08-31  Michael Meeks  <michael@ximian.com>

	* src/linc-connection.c (ERR_CONDS): hack off G_IO_PRI
	(IN_CONDS): PRI|IN
	(linc_connection_connected),
	(linc_connection_real_state_changed): use it.

2001-08-27  Mark McLoughlin <mark@skynet.ie>

	* linc.pc.in: require gobject and gthread.

2001-08-24  Mark McLoughlin <mark@skynet.ie>
	
	* configure.in: remove unused --enable-linc-threadsafe
	option. Removed pthread.h check - we always want to
	link against gthread.

2001-08-23  Michael Meeks  <michael@ximian.com>

	* Version 0.1.4

2001-08-21 Dirk-Jan C. Binnema <djcb@djcbsoftware.nl>

	* src/linc.c (main): ignore SIGPIPE, handle this
	here instead of in libbonobo

2001-08-20  Theo van Klaveren  <t.vanklaveren@student.utwente.nl>

	* include/linc/linc-protocol.h: Include <sys/types.h> to
	fix build on FreeBSD.

2001-08-18  Cody Russell  <bratsche@gnome.org>

	* linc.pc.in: Added.

	* configure.in, Makefile.am: Build and install linc.pc

2001-08-18  Michael Meeks  <michael@ximian.com>

	* configure.in: bump version to 0.1.3

	* src/linc.c (linc_mutex_attrs): kill.
	(linc_init): kill pthread specific bits, take
	gboolean 'init_threads'
	(linc_mutex_new): impl. to hide conditional mess.

	* src/linc-server.c (linc_server_accept_connection):
	split out of
	(linc_server_handle_io): here & update locking.

2001-08-17  Michael Meeks  <michael@ximian.com>

	* src/linc-server.c (linc_server_init): use g_thread
	stuff straight - no need for a recursive mutex - set
	to NULL if threads not initialized.

	* include/linc: homogenise header guard style, add
	G_BEGIN/END_DECLS

	* include/linc/linc-types.h:
	s/LINC_THREADSAFE/G_THREADS_ENABLED/ kill whacked out
	threading macro overload.
	(LINC_MUTEX_[UN]LOCK): don't inexplicably steal
	chunks of the O_ namespace.
	kill extreme strangeness with defining wierd system bits.

	* Revert Mark's patch.

2001-08-18  Mark McLoughlin <mark@skynet.ie>

	* configure.in: added --enable-linc-threadsafe
	option. Defaults to yes.

	* include/linc/linc-config.h.in: added
	LINC_ENABLE_THREADSAFE def.

	* include/linc/linc-connection.h,
	  include/linc/linc-server.h,
	  include/linc/linc-server.h,
	  include/linc/linc-types.h,
	  include/linc/linc-threads.h,
	  include/linc/linc.h: split out threaded
	stuff into linc-threads.h. Removed _GNU_SOURCE,
	_XOPEN_SOURCE and _REENTRANT defines. Cleaned
	up a little.

	* linc/include/linc/Makefile.am: added linc-threads.h.

	* src/Makefile.am: add -D_GNU_SOURCE for
	PTHREAD_MUTEX_RECURSIVE.

2001-08-16  Mark McLoughlin <mark@skynet.ie>

	* configure.in: Cache ACLOCAL_FLAGS.

2001-08-16  Michael Meeks  <michael@ximian.com>

	* configure.in: bump version to 0.1.2

	* src/linc-connection.c (linc_connection_get_type): don't
	use the base_init - but the instance_init to set fd == -1
	so we don't close (0), doh.
	(linc_connection_connected): update to call the
	handle_input virtual method on input.

2001-08-14  Michael Meeks  <michael@ximian.com>

	* src/linc-protocols.c (irda_getaddrinfo): kill another
	heinous srand idiocy.

2001-08-13  Michael Meeks  <michael@ximian.com>

	* src/linc-connection.c (linc_close_fd): split out.
	(linc_connection_dispose): use.
	(linc_connection_real_state_changed): ditto.

2001-08-13  Michael Meeks  <michael@ximian.com>

	* src/linc-connection.c (linc_connection_init): impl,
	to init cnx->fd = -1.
	(linc_connection_get_type): upd. - thanks to Martin Baulig.

2001-08-10  Michael Meeks  <michael@ximian.com>

	* src/linc-protocols.c (linc_set_tmpdir): kill gratuitous evil
	(make_local_tmpdir): copy from ORBit-stable.
	(linc_set_tmpdir): actualy ensure that we have a valid
	working directory.

2001-07-30  Michael Meeks  <michael@ximian.com>

	* Version 0.1.1

2001-07-30  Michael Meeks  <michael@ximian.com>

	* src/linc-connection.c (linc_connection_class_init):
	remove redundant static prototypes.
	(linc_connection_class_init): init 'broken' signal.
	(linc_connection_real_state_changed): emit the 'broken'
	signal.

2001-07-24  Michael Meeks  <michael@ximian.com>

	* src/linc-connection.c (linc_connection_real_state_changed): 
	make it unref the connection on disconnect ...

2001-07-18  Michael Meeks  <michael@ximian.com>

	* src/linc-connection.c (linc_connection_writev):
	s/g_main_iteration/linc_main_iteration/.

	* src/linc.c (linc_main_iteration): impl.
	(linc_init): make the linc_loop run.
	(linc_main_pending): impl.
	(linc_main_loop_run): impl.

	* src/linc-server.c (linc_server_dispose): upd.
	(linc_server_setup): upd.
	(linc_server_get_type): re-order to kill redundant
	prototypes.

	* src/linc-connection.c (linc_source_remove): upd.
	(linc_connection_init): remove; redundant.
	(linc_connection_real_state_changed): upd.
	(linc_connection_connected): upd.

	* src/linc.c (linc_io_add_watch): impl.
	(linc_io_remove_watch): impl.

	* include/linc/linc-types.h: add LincWatch type.

	* src/*.c: s/g_io_add_watch/linc_io_add_watch/

2001-07-16  Darin Adler  <darin@bentspoon.com>

	* include/linc/linc-types.h: Fix order of includes to
	keep Linux happy -- the Solaris change let to a compile
	failure on Linux.

	* src/linc.c: (linc_init): Add a missing ifdef.

2001-07-16  Laszlo Peter  <laca@ireland.sun.com>

	* src/linc-protocols.c: set fakelen to 0 when fakehost is NULL
        to avoid core dump on Solaris.

	* include/linc/linc-types.h: include <sys/types.h> to
	keep Solaris happy.

2001-07-13  Darin Adler  <darin@bentspoon.com>

	* configure.in: Remove duplicate macros, and fix one of
	the test invocations that was not using the x prefix
	technique correctly.

2001-07-13  Michael Meeks  <michael@ximian.com>

	* src/linc-connection.c (linc_connection_initiate): add
	more error checking on fcntls.

2001-07-08  Seth Nickell  <snickell@stanford.edu>

	* src/linc.c: (linc_init):

	Only call g_thread_init if the threading system hasn't
	already been activated.

2001-07-03  Michael Meeks  <michael@ximian.com>

	* src/linc-protocols.c (linc_getaddrinfo): don't re-seed the
	random number generator with the time in seconds !
	don't use "%d%d", rand (), rand () - it gains us nothing,
	add gettimeofday ^ instead.

	* src/linc-connection.c (linc_connection_dispose):
	s/shutdown/dispose.

	* src/linc.c (linc_init): fix g_type_init.

2001-07-02  Michael Meeks  <michael@ximian.com>

	* src/linc-server.c (linc_server_setup): regenerate the
	UDS' name on EINVAL from bind.

2001-06-21  Martin Baulig  <baulig@suse.de>

	* configure.in: Make this work if SSL is not installed.

2001-05-25  Michael Meeks  <michael@ximian.com>

	* src/linc-connection.c (linc_source_remove): split from
	(linc_connection_shutdown): here, and release the self
	reference whilst watching.
	(linc_connection_real_state_changed): use linc_source_remove.
	(linc_connection_connected): hold a ref over the state_changed
	emissions.

2001-05-24  Michael Meeks  <michael@ximian.com>

	* src/linc-connection.c (linc_connection_connected):
	unref the connection object on disconnection.

	* src/linc-server.c (linc_server_destroy):
	protect against multiple shutdowns, and rename to

	* src/linc-connection.c (linc_connection_destroy): 
	protect against multiple shutdowns, and rename to
	(linc_connection_shutdown): this.
	(linc_connection_real_state_changed): add assertions
	on source removal.

2001-05-18  Michael Meeks  <michael@ximian.com>

	* src/linc-connection.c (linc_connection_destroy): check
	the io channel is valid before the unref - happens in
	some error cases.

2001-05-18  Michael Meeks  <michael@ximian.com>

	* src/linc-server.c (linc_server_class_init): actualy
	make the signal run.

2001-05-18  Michael Meeks  <michael@ximian.com>

	* autogen.sh: update for libtool 1.4

	* src/linc-connection.c (linc_connection_destroy): unref
	the IO channel on destroy - doh.

2000-10-27  Michael Meeks  <michael@helixcode.com>

	* src/linc-server.c (linc_server_get_type): type_register_static
	fix.

	* src/linc-connection.c (linc_connection_writev): use cnx->fd.
	(linc_connection_get_type): add '0' parameter for head glib.

